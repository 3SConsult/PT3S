<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Example 8: pandapipes &mdash; PT3S 90.14.47.0.dev1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
      <link rel="stylesheet" type="text/css" href="_static/custom.css" />
      <link rel="stylesheet" type="text/css" href="_static/nbsphinx-code-cells.css" />
      <link rel="stylesheet" type="text/css" href="_static/custom.css" />

  
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html">
            
              <img src="_static/pt3s_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="functions.html">Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="objects.html">Classes and Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="releases.html">Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="developers.html">For Developers</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PT3S</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Example 8: pandapipes</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/Example8.ipynb.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="Example-8:-pandapipes">
<h1>Example 8: pandapipes<a class="headerlink" href="#Example-8:-pandapipes" title="Permalink to this heading"></a></h1>
<p>This Example demonstrates a pandapipes calculation of a 1-pipe, 2-nodes SIR 3S model.</p>
</section>
<section id="Read-SIR-3S-Model">
<h1>Read SIR 3S Model<a class="headerlink" href="#Read-SIR-3S-Model" title="Permalink to this heading"></a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">PT3S</span> <span class="kn">import</span> <span class="n">dxAndMxHelperFcts</span>
<span class="k">except</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">dxAndMxHelperFcts</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">logging</span>

<span class="n">logger</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">()</span>

<span class="n">logFileName</span><span class="o">=</span> <span class="sa">r</span><span class="s2">&quot;Example8.log&quot;</span>

<span class="n">loglevel</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">DEBUG</span>
<span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="n">logFileName</span>
                        <span class="p">,</span><span class="n">filemode</span><span class="o">=</span><span class="s1">&#39;w&#39;</span>
                        <span class="p">,</span><span class="n">level</span><span class="o">=</span><span class="n">loglevel</span>
                        <span class="p">,</span><span class="nb">format</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%(asctime)s</span><span class="s2"> ; </span><span class="si">%(name)-60s</span><span class="s2"> ; </span><span class="si">%(levelname)-7s</span><span class="s2"> ; </span><span class="si">%(message)s</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">fileHandler</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">FileHandler</span><span class="p">(</span><span class="n">logFileName</span><span class="p">)</span>

<span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">fileHandler</span><span class="p">)</span>

<span class="n">consoleHandler</span> <span class="o">=</span> <span class="n">logging</span><span class="o">.</span><span class="n">StreamHandler</span><span class="p">()</span>
<span class="n">consoleHandler</span><span class="o">.</span><span class="n">setFormatter</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">Formatter</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%(levelname)-7s</span><span class="s2"> ; </span><span class="si">%(message)s</span><span class="s2">&quot;</span><span class="p">))</span>
<span class="n">consoleHandler</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">INFO</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">addHandler</span><span class="p">(</span><span class="n">consoleHandler</span><span class="p">)</span>

<span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;numba&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">ERROR</span><span class="p">)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;pandapipes&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">ERROR</span><span class="p">)</span>
<span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;matplotlib&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">ERROR</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dbFilename</span><span class="o">=</span><span class="s2">&quot;Example8&quot;</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="n">dbFile</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">dxAndMxHelperFcts</span><span class="o">.</span><span class="vm">__file__</span><span class="p">))</span>
                    <span class="o">+</span><span class="s1">&#39;/Examples/&#39;</span>
                    <span class="o">+</span><span class="n">dbFilename</span>
                    <span class="o">+</span><span class="s1">&#39;.db3&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m</span><span class="o">=</span><span class="n">dxAndMxHelperFcts</span><span class="o">.</span><span class="n">readDxAndMx</span><span class="p">(</span><span class="n">dbFile</span><span class="o">=</span><span class="n">dbFile</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
INFO    ; Dx.__init__: dbFile (abspath): c:\users\aUserName\3s\pt3s\Examples\Example8.db3 exists readable ...
INFO    ; Dx.__init__:  SYSTEMKONFIG ID 3 not defined. Value(ID=3) is supposed to define the Model which is used in QGIS. Now QGISmodelXk is undefined ...
INFO    ; dxAndMxHelperFcts.readDxAndMx: ..\Examples\Example8-dx.pkl exists and is overwritten...
INFO    ; dxAndMxHelperFcts.readDxAndMx:  QGISmodelXk not defined. Now the MX of 1st Model in VIEW_MODELLE is used ...
INFO    ; Mx.setResultsToMxsFile: Mxs: ..\Examples\WDExample8\B1\V0\BZ1\M-1-0-1.1.MXS reading ...
INFO    ; dxAndMxHelperFcts.readDxAndMx: ..\Examples\Example8-mx-_Examples_WDExample8_B1_V0_BZ1_M_1_0_1_1_MX1.pkl exists and is overwritten...
INFO    ; dxWithMx.__init__: Example8: processing dx and mx ...
INFO    ; dxAndMxHelperFcts.readDxAndMx: ..\Examples\Example8-m.pkl exists and is overwritten...
</pre></div></div>
</div>
</section>
<section id="Generate-corresponding-pp-model">
<h1>Generate corresponding pp model<a class="headerlink" href="#Generate-corresponding-pp-model" title="Permalink to this heading"></a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="ch">#!pip install pandapipes</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandapipes</span>
<span class="n">net</span> <span class="o">=</span> <span class="n">pandapipes</span><span class="o">.</span><span class="n">create_empty_network</span><span class="p">(</span><span class="n">fluid</span><span class="o">=</span><span class="s2">&quot;water&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<section id="junctions">
<h2>junctions<a class="headerlink" href="#junctions" title="Permalink to this heading"></a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># create junctions</span>
<span class="n">js</span><span class="o">=</span><span class="p">{}</span>
<span class="k">for</span> <span class="n">idx</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">V3_KNOT</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="n">j</span><span class="o">=</span><span class="n">pandapipes</span><span class="o">.</span><span class="n">create_junction</span><span class="p">(</span><span class="n">net</span>
                       <span class="p">,</span><span class="n">pn_bar</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;PH&#39;</span><span class="p">]</span>
                       <span class="p">,</span><span class="n">tfluid_k</span><span class="o">=</span><span class="mf">273.15</span><span class="o">+</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;T&#39;</span><span class="p">]</span>
                       <span class="p">,</span><span class="n">height_m</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;ZKOR&#39;</span><span class="p">]</span>
                       <span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;NAME&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">~</span><span class="si">{</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;tk&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="p">)</span>
    <span class="n">js</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;tk&#39;</span><span class="p">]]</span><span class="o">=</span><span class="n">j</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">net</span><span class="o">.</span><span class="n">junction</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>pn_bar</th>
      <th>tfluid_k</th>
      <th>height_m</th>
      <th>in_service</th>
      <th>type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>j1~5545156887373324999</td>
      <td>10.000000</td>
      <td>363.15000</td>
      <td>0.0</td>
      <td>True</td>
      <td>junction</td>
    </tr>
    <tr>
      <th>1</th>
      <td>j2~4658286599152640406</td>
      <td>9.578555</td>
      <td>362.81214</td>
      <td>0.0</td>
      <td>True</td>
      <td>junction</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="pipes">
<h2>pipes<a class="headerlink" href="#pipes" title="Permalink to this heading"></a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># create pipes</span>
<span class="n">ps</span><span class="o">=</span><span class="p">{}</span>
<span class="k">for</span> <span class="n">idx</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">V3_ROHR</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
     <span class="n">p</span><span class="o">=</span><span class="n">pandapipes</span><span class="o">.</span><span class="n">create_pipe_from_parameters</span><span class="p">(</span><span class="n">net</span>
                                  <span class="p">,</span><span class="n">from_junction</span><span class="o">=</span><span class="n">js</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;fkKI&#39;</span><span class="p">]]</span>
                                  <span class="p">,</span><span class="n">to_junction</span><span class="o">=</span><span class="n">js</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;fkKK&#39;</span><span class="p">]]</span>
                                  <span class="p">,</span><span class="n">length_km</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;L&#39;</span><span class="p">]</span><span class="o">/</span><span class="mf">1000.</span>
                                  <span class="p">,</span><span class="n">diameter_m</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;DI&#39;</span><span class="p">]</span><span class="o">/</span><span class="mf">1000.</span>
                                  <span class="p">,</span><span class="n">k_mm</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;RAU&#39;</span><span class="p">]</span>
                                  <span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;NAME_i&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">~</span><span class="si">{</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;NAME_k&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">~</span><span class="si">{</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;tk&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
     <span class="p">)</span>
     <span class="n">ps</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;tk&#39;</span><span class="p">]]</span><span class="o">=</span><span class="n">p</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">net</span><span class="o">.</span><span class="n">pipe</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>from_junction</th>
      <th>to_junction</th>
      <th>std_type</th>
      <th>length_km</th>
      <th>diameter_m</th>
      <th>k_mm</th>
      <th>loss_coefficient</th>
      <th>u_w_per_m2k</th>
      <th>text_k</th>
      <th>qext_w</th>
      <th>sections</th>
      <th>in_service</th>
      <th>type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>j1~j2~5436899515124385631</td>
      <td>0</td>
      <td>1</td>
      <td>None</td>
      <td>1.0</td>
      <td>0.2</td>
      <td>0.25</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>0.0</td>
      <td>1</td>
      <td>True</td>
      <td>pipe</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="sources-(ext.-grids)">
<h2>sources (ext. grids)<a class="headerlink" href="#sources-(ext.-grids)" title="Permalink to this heading"></a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># sources (ext. grids)</span>
<span class="k">for</span> <span class="n">idx</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">V3_KNOT</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="k">match</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;KTYP&#39;</span><span class="p">]:</span>
        <span class="k">case</span> <span class="s1">&#39;PKON&#39;</span><span class="p">:</span>
            <span class="n">pandapipes</span><span class="o">.</span><span class="n">create_ext_grid</span><span class="p">(</span><span class="n">net</span>
                              <span class="p">,</span><span class="n">junction</span><span class="o">=</span><span class="n">js</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;tk&#39;</span><span class="p">]]</span>
                              <span class="p">,</span><span class="n">p_bar</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;PH&#39;</span><span class="p">]</span>
                              <span class="p">,</span><span class="n">t_k</span><span class="o">=</span><span class="mf">273.15</span><span class="o">+</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;T&#39;</span><span class="p">]</span>
                              <span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Src: </span><span class="si">{</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;NAME&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">~</span><span class="si">{</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;tk&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
            <span class="k">continue</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">net</span><span class="o">.</span><span class="n">ext_grid</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>junction</th>
      <th>p_bar</th>
      <th>t_k</th>
      <th>in_service</th>
      <th>type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Src: j1~5545156887373324999</td>
      <td>0</td>
      <td>10.0</td>
      <td>363.15</td>
      <td>True</td>
      <td>pt</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="sinks">
<h2>sinks<a class="headerlink" href="#sinks" title="Permalink to this heading"></a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># sinks</span>
<span class="k">for</span> <span class="n">idx</span><span class="p">,</span><span class="n">row</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">V3_KNOT</span><span class="o">.</span><span class="n">iterrows</span><span class="p">():</span>
    <span class="k">match</span> <span class="n">row</span><span class="p">[</span><span class="s1">&#39;KTYP&#39;</span><span class="p">]:</span>
        <span class="k">case</span> <span class="s1">&#39;QKON&#39;</span><span class="p">:</span>
            <span class="n">pandapipes</span><span class="o">.</span><span class="n">create_sink</span><span class="p">(</span><span class="n">net</span>
                         <span class="p">,</span><span class="n">junction</span><span class="o">=</span><span class="n">js</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;tk&#39;</span><span class="p">]]</span>
                         <span class="p">,</span><span class="n">mdot_kg_per_s</span><span class="o">=-</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;M&#39;</span><span class="p">]</span>
                         <span class="p">,</span><span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;Snk: </span><span class="si">{</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;NAME&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">~</span><span class="si">{</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;tk&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="k">case</span><span class="w"> </span><span class="k">_</span><span class="p">:</span>
            <span class="k">continue</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">net</span><span class="o">.</span><span class="n">sink</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>name</th>
      <th>junction</th>
      <th>mdot_kg_per_s</th>
      <th>scaling</th>
      <th>in_service</th>
      <th>type</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Snk: j2~4658286599152640406</td>
      <td>1</td>
      <td>27.777779</td>
      <td>1.0</td>
      <td>True</td>
      <td>sink</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
</section>
<section id="calculate-pp-model">
<h1>calculate pp model<a class="headerlink" href="#calculate-pp-model" title="Permalink to this heading"></a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pandapipes</span><span class="o">.</span><span class="n">pipeflow</span><span class="p">(</span><span class="n">net</span>
            <span class="p">,</span><span class="n">friction_model</span><span class="o">=</span><span class="s1">&#39;colebrook&#39;</span>
            <span class="c1">#,mode=&#39;sequential&#39;</span>
            <span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="examine-pp-result">
<h1>examine pp result<a class="headerlink" href="#examine-pp-result" title="Permalink to this heading"></a></h1>
<section id="id1">
<h2>junctions<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">net</span><span class="o">.</span><span class="n">res_junction</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>p_bar</th>
      <th>t_k</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>10.0000</td>
      <td>363.15000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>9.5709</td>
      <td>362.81214</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="id2">
<h2>pipes<a class="headerlink" href="#id2" title="Permalink to this heading"></a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">net</span><span class="o">.</span><span class="n">res_pipe</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>v_mean_m_per_s</th>
      <th>p_from_bar</th>
      <th>p_to_bar</th>
      <th>t_from_k</th>
      <th>t_to_k</th>
      <th>t_outlet_k</th>
      <th>mdot_from_kg_per_s</th>
      <th>mdot_to_kg_per_s</th>
      <th>vdot_m3_per_s</th>
      <th>reynolds</th>
      <th>lambda</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.915959</td>
      <td>10.0</td>
      <td>9.5709</td>
      <td>363.15</td>
      <td>362.81214</td>
      <td>362.81214</td>
      <td>27.777779</td>
      <td>-27.777779</td>
      <td>0.028776</td>
      <td>561271.686993</td>
      <td>0.021193</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="id3">
<h2>sources (ext. grids)<a class="headerlink" href="#id3" title="Permalink to this heading"></a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">net</span><span class="o">.</span><span class="n">res_ext_grid</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mdot_kg_per_s</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>-27.777779</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="id4">
<h2>sinks<a class="headerlink" href="#id4" title="Permalink to this heading"></a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">net</span><span class="o">.</span><span class="n">res_sink</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>mdot_kg_per_s</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>27.777779</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
</section>
<section id="compare-results">
<h1>compare results<a class="headerlink" href="#compare-results" title="Permalink to this heading"></a></h1>
<section id="mapping">
<h2>mapping<a class="headerlink" href="#mapping" title="Permalink to this heading"></a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m</span><span class="o">.</span><span class="n">V3_KNOT</span><span class="p">[</span><span class="s1">&#39;ppID&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">V3_KNOT</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="n">js</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;tk&#39;</span><span class="p">]],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m</span><span class="o">.</span><span class="n">V3_ROHR</span><span class="p">[</span><span class="s1">&#39;ppID&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">V3_ROHR</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="n">ps</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;tk&#39;</span><span class="p">]],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">dfCmpJunctions</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">V3_KNOT</span><span class="p">,</span><span class="n">net</span><span class="o">.</span><span class="n">res_junction</span><span class="p">,</span><span class="n">left_on</span><span class="o">=</span><span class="s1">&#39;ppID&#39;</span><span class="p">,</span><span class="n">right_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">dfCmpPipes</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">V3_ROHR</span><span class="p">,</span><span class="n">net</span><span class="o">.</span><span class="n">res_pipe</span><span class="p">,</span><span class="n">left_on</span><span class="o">=</span><span class="s1">&#39;ppID&#39;</span><span class="p">,</span><span class="n">right_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">dfCmpJunctions</span><span class="p">[</span><span class="s1">&#39;t_C&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">dfCmpJunctions</span><span class="p">[</span><span class="s1">&#39;t_k&#39;</span><span class="p">]</span><span class="o">-</span><span class="mf">273.15</span>
<span class="n">dfCmpPipes</span><span class="p">[</span><span class="s1">&#39;t_from_C&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">dfCmpPipes</span><span class="p">[</span><span class="s1">&#39;t_from_k&#39;</span><span class="p">]</span><span class="o">-</span><span class="mf">273.15</span>
<span class="n">dfCmpPipes</span><span class="p">[</span><span class="s1">&#39;t_to_C&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">dfCmpPipes</span><span class="p">[</span><span class="s1">&#39;t_to_k&#39;</span><span class="p">]</span><span class="o">-</span><span class="mf">273.15</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dfCmpPipes</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[23]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pk</th>
      <th>fkDE</th>
      <th>rk</th>
      <th>tk</th>
      <th>fkKI</th>
      <th>fkKK</th>
      <th>fkDTRO_ROWD</th>
      <th>fkLTGR</th>
      <th>fkSTRASSE</th>
      <th>L</th>
      <th>LZU</th>
      <th>RAU</th>
      <th>JLAMBS</th>
      <th>LAMBDA0</th>
      <th>ZEIN</th>
      <th>ZAUS</th>
      <th>ZUML</th>
      <th>ASOLL</th>
      <th>INDSCHALL</th>
      <th>BAUJAHR</th>
      <th>HAL</th>
      <th>fkCONT</th>
      <th>fk2LROHR</th>
      <th>BESCHREIBUNG</th>
      <th>GEOMWKB</th>
      <th>DELETED</th>
      <th>SELECT1</th>
      <th>IDREFERENZ</th>
      <th>KENNUNG</th>
      <th>IPLANUNG</th>
      <th>KVR</th>
      <th>pk_BZ</th>
      <th>fkDE_BZ</th>
      <th>fk</th>
      <th>QSVB</th>
      <th>IRTRENN</th>
      <th>LECKSTATUS</th>
      <th>LECKSTART</th>
      <th>LECKEND</th>
      <th>LECKORT</th>
      <th>LECKMENGE</th>
      <th>IMPTNZ</th>
      <th>ZVLIMPTNZ</th>
      <th>KANTENZV</th>
      <th>GEOM</th>
      <th>GRAF</th>
      <th>MId</th>
      <th>MText</th>
      <th>Basis</th>
      <th>Variante</th>
      <th>BZ</th>
      <th>Geaendert</th>
      <th>Erstellt</th>
      <th>pk_VMBZ</th>
      <th>fkBASIS</th>
      <th>fkVARIANTE</th>
      <th>fkBZ</th>
      <th>MZ</th>
      <th>MT</th>
      <th>pk_CONT</th>
      <th>fkDE_CONT</th>
      <th>rk_CONT</th>
      <th>tk_CONT</th>
      <th>ID_CONT</th>
      <th>NAME_CONT</th>
      <th>IDPARENT_CONT</th>
      <th>rkPARENT_CONT</th>
      <th>LFDNR_CONT</th>
      <th>GRAF_CONT</th>
      <th>FONT_CONT</th>
      <th>GEOM_CONT</th>
      <th>DELETED_CONT</th>
      <th>SELECT1_CONT</th>
      <th>IDREFERENZ_CONT</th>
      <th>NAME_DTRO</th>
      <th>DN</th>
      <th>DI</th>
      <th>DA</th>
      <th>S</th>
      <th>KT</th>
      <th>PN</th>
      <th>Am2</th>
      <th>Vm3</th>
      <th>NAME_LTGR</th>
      <th>NAME_STRASSE</th>
      <th>tk_i</th>
      <th>NAME_i</th>
      <th>tk_k</th>
      <th>NAME_k</th>
      <th>mx2NofPts</th>
      <th>dL</th>
      <th>mx2Idx</th>
      <th>(STAT, ROHR~*~*~*~A, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, ROHR~*~*~*~DTTR, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, ROHR~*~*~*~DWVERL, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, ROHR~*~*~*~DWVERLABS, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, ROHR~*~*~*~IAKTIV, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, ROHR~*~*~*~IRTRENN, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, ROHR~*~*~*~JV, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, ROHR~*~*~*~LAMBDA, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, ROHR~*~*~*~MAV, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, ROHR~*~*~*~PDAMPF, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, ROHR~*~*~*~PHR, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, ROHR~*~*~*~PMIN, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, ROHR~*~*~*~QMAV, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, ROHR~*~*~*~VAV, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, ROHR~*~*~*~VOLDA, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, ROHR~*~*~*~WVL, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, ROHR~*~*~*~ZAUS, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, ROHR~*~*~*~ZEIN, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>('STAT', 'KNOT~*~*~*~PH', Timestamp('2025-04-08 09:45:59'), Timestamp('2025-04-08 09:45:59'))_i</th>
      <th>('STAT', 'KNOT~*~*~*~H', Timestamp('2025-04-08 09:45:59'), Timestamp('2025-04-08 09:45:59'))_i</th>
      <th>('STAT', 'KNOT~*~*~*~T', Timestamp('2025-04-08 09:45:59'), Timestamp('2025-04-08 09:45:59'))_i</th>
      <th>('STAT', 'KNOT~*~*~*~RHO', Timestamp('2025-04-08 09:45:59'), Timestamp('2025-04-08 09:45:59'))_i</th>
      <th>('STAT', 'KNOT~*~*~*~PH', Timestamp('2025-04-08 09:45:59'), Timestamp('2025-04-08 09:45:59'))_k</th>
      <th>('STAT', 'KNOT~*~*~*~H', Timestamp('2025-04-08 09:45:59'), Timestamp('2025-04-08 09:45:59'))_k</th>
      <th>('STAT', 'KNOT~*~*~*~T', Timestamp('2025-04-08 09:45:59'), Timestamp('2025-04-08 09:45:59'))_k</th>
      <th>('STAT', 'KNOT~*~*~*~RHO', Timestamp('2025-04-08 09:45:59'), Timestamp('2025-04-08 09:45:59'))_k</th>
      <th>QMAVAbs</th>
      <th>VAVAbs</th>
      <th>PHRAbs</th>
      <th>JVAbs</th>
      <th>MAV</th>
      <th>LAMBDA</th>
      <th>ppID</th>
      <th>v_mean_m_per_s</th>
      <th>p_from_bar</th>
      <th>p_to_bar</th>
      <th>t_from_k</th>
      <th>t_to_k</th>
      <th>t_outlet_k</th>
      <th>mdot_from_kg_per_s</th>
      <th>mdot_to_kg_per_s</th>
      <th>vdot_m3_per_s</th>
      <th>reynolds</th>
      <th>lambda</th>
      <th>t_from_C</th>
      <th>t_to_C</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>5436899515124385631</td>
      <td>4982567935033599504</td>
      <td>5436899515124385631</td>
      <td>5436899515124385631</td>
      <td>5545156887373324999</td>
      <td>4658286599152640406</td>
      <td>5456839515335324031</td>
      <td>5515842498618683031</td>
      <td>-1</td>
      <td>1000.0</td>
      <td>None</td>
      <td>0.25</td>
      <td>1.0</td>
      <td>0.025</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>1000.0</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>5060822126933396627</td>
      <td>-1</td>
      <td>Template Element for single Pipe Creation</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>3S5201225267441779810</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>NaN</td>
      <td>4741144811589278980</td>
      <td>4804028781596645401</td>
      <td>5436899515124385631</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>b'\x01\x02\x00\x00\x00\x02\x00\x00\x00\x00\x00...</td>
      <td>b'\x00\x00\x80?\x00\x00\x00\x00\x01\x00\x00\x0...</td>
      <td>M-1-0-1</td>
      <td></td>
      <td>B1</td>
      <td>V0</td>
      <td>BZ1</td>
      <td>2025-05-09 13:17:45</td>
      <td>2025-04-08 11:45:59</td>
      <td>5703508123076770847</td>
      <td>4982567935033599504</td>
      <td>5151772185690695097</td>
      <td>4804028781596645401</td>
      <td>1</td>
      <td>1</td>
      <td>5060822126933396627</td>
      <td>4982567935033599504</td>
      <td>5060822126933396627</td>
      <td>5060822126933396627</td>
      <td>1001.0</td>
      <td>M-1-0-1</td>
      <td>1001.0</td>
      <td>5060822126933396627</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>b'\x00\x00\x80?\x01\x00\x00\x00\x01\x00\x00\x0...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>None</td>
      <td>STDROHR</td>
      <td>xxx</td>
      <td>200.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.494</td>
      <td>0.0</td>
      <td>0.031416</td>
      <td>31.415927</td>
      <td>STDROHR</td>
      <td>None</td>
      <td>5545156887373324999</td>
      <td>j1</td>
      <td>4658286599152640406</td>
      <td>j2</td>
      <td>11</td>
      <td>100.0</td>
      <td>0</td>
      <td>0.0</td>
      <td>0.308801</td>
      <td>39.43655</td>
      <td>39.43655</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.414041</td>
      <td>0.021201</td>
      <td>27.777779</td>
      <td>0.696674</td>
      <td>0.414041</td>
      <td>10.578555</td>
      <td>100.0</td>
      <td>0.899538</td>
      <td>-3.333333e+32</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>10.0</td>
      <td>10.0</td>
      <td>90.0</td>
      <td>965.200012</td>
      <td>9.578555</td>
      <td>9.578555</td>
      <td>89.66214</td>
      <td>965.571655</td>
      <td>100.0</td>
      <td>0.899538</td>
      <td>0.414041</td>
      <td>0.414041</td>
      <td>27.777779</td>
      <td>0.021201</td>
      <td>0</td>
      <td>0.915959</td>
      <td>10.0</td>
      <td>9.5709</td>
      <td>363.15</td>
      <td>362.81214</td>
      <td>362.81214</td>
      <td>27.777779</td>
      <td>-27.777779</td>
      <td>0.028776</td>
      <td>561271.686993</td>
      <td>0.021193</td>
      <td>90.0</td>
      <td>89.66214</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</section>
<section id="comparison">
<h2>comparison<a class="headerlink" href="#comparison" title="Permalink to this heading"></a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dfCmpJunctions</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[24]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pk</th>
      <th>fkDE</th>
      <th>rk</th>
      <th>tk</th>
      <th>NAME</th>
      <th>KTYP</th>
      <th>XKOR</th>
      <th>YKOR</th>
      <th>ZKOR</th>
      <th>QM_EIN</th>
      <th>LFAKT</th>
      <th>fkPZON</th>
      <th>fkFSTF</th>
      <th>fkUTMP</th>
      <th>fkFQPS</th>
      <th>fkCONT</th>
      <th>fk2LKNOT</th>
      <th>BESCHREIBUNG</th>
      <th>GEOMWKB</th>
      <th>DELETED</th>
      <th>SELECT1</th>
      <th>IDREFERENZ</th>
      <th>KENNUNG</th>
      <th>IPLANUNG</th>
      <th>KVR</th>
      <th>DRAKONZ</th>
      <th>pk_BZ</th>
      <th>fkDE_BZ</th>
      <th>fk</th>
      <th>fkPVAR</th>
      <th>fkQVAR</th>
      <th>fkLFKT</th>
      <th>PH_EIN</th>
      <th>TM</th>
      <th>TE</th>
      <th>PH_MIN</th>
      <th>GRAF</th>
      <th>MId</th>
      <th>MText</th>
      <th>Basis</th>
      <th>Variante</th>
      <th>BZ</th>
      <th>Geaendert</th>
      <th>Erstellt</th>
      <th>pk_VMBZ</th>
      <th>fkBASIS</th>
      <th>fkVARIANTE</th>
      <th>fkBZ</th>
      <th>MZ</th>
      <th>MT</th>
      <th>pk_CONT</th>
      <th>fkDE_CONT</th>
      <th>rk_CONT</th>
      <th>tk_CONT</th>
      <th>ID_CONT</th>
      <th>NAME_CONT</th>
      <th>IDPARENT_CONT</th>
      <th>rkPARENT_CONT</th>
      <th>LFDNR_CONT</th>
      <th>GRAF_CONT</th>
      <th>FONT_CONT</th>
      <th>GEOM_CONT</th>
      <th>DELETED_CONT</th>
      <th>SELECT1_CONT</th>
      <th>IDREFERENZ_CONT</th>
      <th>pk_VKNO</th>
      <th>fkDE_VKNO</th>
      <th>rk_VKNO</th>
      <th>fkKNOT_VKNO</th>
      <th>fkCONT_VKNO</th>
      <th>SHOWNAME_VKNO</th>
      <th>POSNAME_VKNO</th>
      <th>POINTINSERTX_VKNO</th>
      <th>POINTINSERTY_VKNO</th>
      <th>SYMBOLFACT_VKNO</th>
      <th>DISPLAYMODE_VKNO</th>
      <th>DELETED_VKNO</th>
      <th>SELECT1_VKNO</th>
      <th>MId_VKNO</th>
      <th>MText_VKNO</th>
      <th>Basis_VKNO</th>
      <th>Variante_VKNO</th>
      <th>BZ_VKNO</th>
      <th>Geaendert_VKNO</th>
      <th>Erstellt_VKNO</th>
      <th>pk_VMBASIS_VKNO</th>
      <th>fkBASIS_VKNO</th>
      <th>fkVARIANTE_VKNO</th>
      <th>fkBZ_VKNO</th>
      <th>MZ_VKNO</th>
      <th>MT_VKNO</th>
      <th>MId_VMVARIANTE_VKNO</th>
      <th>MText_VMVARIANTE_VKNO</th>
      <th>Basis_VMVARIANTE_VKNO</th>
      <th>Variante_VMVARIANTE_VKNO</th>
      <th>BZ_VMVARIANTE_VKNO</th>
      <th>Geaendert_VMVARIANTE_VKNO</th>
      <th>Erstellt_VMVARIANTE_VKNO</th>
      <th>pk_VMVARIANTE_VKNO</th>
      <th>fkBASIS_VMVARIANTE_VKNO</th>
      <th>fkVARIANTE_VMVARIANTE_VKNO</th>
      <th>fkBZ_VMVARIANTE_VKNO</th>
      <th>MZ_VMVARIANTE_VKNO</th>
      <th>MT_VMVARIANTE_VKNO</th>
      <th>pk_CONT_VKNO</th>
      <th>fkDE_CONT_VKNO</th>
      <th>rk_CONT_VKNO</th>
      <th>tk_CONT_VKNO</th>
      <th>ID_CONT_VKNO</th>
      <th>NAME_CONT_VKNO</th>
      <th>IDPARENT_CONT_VKNO</th>
      <th>rkPARENT_CONT_VKNO</th>
      <th>LFDNR_CONT_VKNO</th>
      <th>GRAF_CONT_VKNO</th>
      <th>FONT_CONT_VKNO</th>
      <th>GEOM_CONT_VKNO</th>
      <th>DELETED_CONT_VKNO</th>
      <th>SELECT1_CONT_VKNO</th>
      <th>IDREFERENZ_CONT_VKNO</th>
      <th>NAME_LFKT</th>
      <th>NAME_PVAR</th>
      <th>NAME_PZON</th>
      <th>NAME_QVAR</th>
      <th>NAME_UTMP</th>
      <th>NAME_FSTF</th>
      <th>NAME_FQPS</th>
      <th>mx2Idx</th>
      <th>(STAT, KNOT~*~*~*~BCIND, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, KNOT~*~*~*~DP, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, KNOT~*~*~*~DPH, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, KNOT~*~*~*~FITT_BASTYPE, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, KNOT~*~*~*~FITT_DP1, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, KNOT~*~*~*~FITT_DP2, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, KNOT~*~*~*~FITT_DP3, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, KNOT~*~*~*~FITT_STATE, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, KNOT~*~*~*~H, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, KNOT~*~*~*~IAKTIV, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, KNOT~*~*~*~LFAKTAKT, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, KNOT~*~*~*~M, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, KNOT~*~*~*~P, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, KNOT~*~*~*~PDAMPF, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, KNOT~*~*~*~PH, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, KNOT~*~*~*~PHMINMAXDIF, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, KNOT~*~*~*~PH_EIN, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, KNOT~*~*~*~PH_MIN, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, KNOT~*~*~*~QM, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, KNOT~*~*~*~RHO, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, KNOT~*~*~*~T, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, KNOT~*~*~*~TTR, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, KNOT~*~*~*~VOLD, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>PH</th>
      <th>QM</th>
      <th>dPH</th>
      <th>T</th>
      <th>M</th>
      <th>ppID</th>
      <th>p_bar</th>
      <th>t_k</th>
      <th>t_C</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>3</th>
      <td>5545156887373324999</td>
      <td>4982567935033599504</td>
      <td>5545156887373324999</td>
      <td>5545156887373324999</td>
      <td>j1</td>
      <td>PKON</td>
      <td>300.000012</td>
      <td>649.999976</td>
      <td>0.0</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>-1</td>
      <td>5297658028320820931</td>
      <td>5154968777807259962</td>
      <td>-1</td>
      <td>5060822126933396627</td>
      <td>-1</td>
      <td>Template Element for single Node Creation</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>3S5671171592228004325</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>NaN</td>
      <td>None</td>
      <td>5473573628395650757</td>
      <td>4804028781596645401</td>
      <td>5545156887373324999</td>
      <td>-1</td>
      <td>-1</td>
      <td>-1</td>
      <td>10.0</td>
      <td>None</td>
      <td>90.0</td>
      <td>None</td>
      <td>b'\x00\x00\x00\x00\x01\x00\x00\x00\x02\x00\x00...</td>
      <td>M-1-0-1</td>
      <td></td>
      <td>B1</td>
      <td>V0</td>
      <td>BZ1</td>
      <td>2025-05-09 13:17:45</td>
      <td>2025-04-08 11:45:59</td>
      <td>5703508123076770847</td>
      <td>4982567935033599504</td>
      <td>5151772185690695097</td>
      <td>4804028781596645401</td>
      <td>1</td>
      <td>1</td>
      <td>5060822126933396627</td>
      <td>4982567935033599504</td>
      <td>5060822126933396627</td>
      <td>5060822126933396627</td>
      <td>1001.0</td>
      <td>M-1-0-1</td>
      <td>1001.0</td>
      <td>5060822126933396627</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>b'\x00\x00\x80?\x01\x00\x00\x00\x01\x00\x00\x0...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>None</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>Standard</td>
      <td>Standard</td>
      <td>None</td>
      <td>NaN</td>
      <td>24.0</td>
      <td>-3.333333e+32</td>
      <td>-3.333333e+32</td>
      <td>-333333333.0</td>
      <td>-3.333333e+32</td>
      <td>-3.333333e+32</td>
      <td>-3.333333e+32</td>
      <td>-333333333.0</td>
      <td>10.000000</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>27.777779</td>
      <td>11.000000</td>
      <td>0.701100</td>
      <td>10.000000</td>
      <td>0.0</td>
      <td>10.000000</td>
      <td>0.0</td>
      <td>100.0</td>
      <td>965.200012</td>
      <td>90.00000</td>
      <td>0.000000</td>
      <td>0.0</td>
      <td>10.000000</td>
      <td>100.0</td>
      <td>None</td>
      <td>90.00000</td>
      <td>27.777779</td>
      <td>0</td>
      <td>10.0000</td>
      <td>363.15000</td>
      <td>90.00000</td>
    </tr>
    <tr>
      <th>4</th>
      <td>4658286599152640406</td>
      <td>4982567935033599504</td>
      <td>4658286599152640406</td>
      <td>4658286599152640406</td>
      <td>j2</td>
      <td>QKON</td>
      <td>449.999917</td>
      <td>499.999869</td>
      <td>0.0</td>
      <td>-100.0</td>
      <td>1.0</td>
      <td>-1</td>
      <td>5297658028320820931</td>
      <td>5154968777807259962</td>
      <td>-1</td>
      <td>5060822126933396627</td>
      <td>-1</td>
      <td>Template Element for single Node Creation</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>3S5671171592228004325</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>NaN</td>
      <td>None</td>
      <td>4927625957676832607</td>
      <td>4804028781596645401</td>
      <td>4658286599152640406</td>
      <td>-1</td>
      <td>-1</td>
      <td>-1</td>
      <td>NaN</td>
      <td>None</td>
      <td>NaN</td>
      <td>None</td>
      <td>b'\x00\x00\x00\x00\x01\x00\x00\x00\x00\x00\x00...</td>
      <td>M-1-0-1</td>
      <td></td>
      <td>B1</td>
      <td>V0</td>
      <td>BZ1</td>
      <td>2025-05-09 13:17:45</td>
      <td>2025-04-08 11:45:59</td>
      <td>5703508123076770847</td>
      <td>4982567935033599504</td>
      <td>5151772185690695097</td>
      <td>4804028781596645401</td>
      <td>1</td>
      <td>1</td>
      <td>5060822126933396627</td>
      <td>4982567935033599504</td>
      <td>5060822126933396627</td>
      <td>5060822126933396627</td>
      <td>1001.0</td>
      <td>M-1-0-1</td>
      <td>1001.0</td>
      <td>5060822126933396627</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>b'\x00\x00\x80?\x01\x00\x00\x00\x01\x00\x00\x0...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>None</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>Standard</td>
      <td>Standard</td>
      <td>None</td>
      <td>NaN</td>
      <td>21.0</td>
      <td>-3.333333e+32</td>
      <td>-3.333333e+32</td>
      <td>-333333333.0</td>
      <td>-3.333333e+32</td>
      <td>-3.333333e+32</td>
      <td>-3.333333e+32</td>
      <td>-333333333.0</td>
      <td>9.578555</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>-27.777779</td>
      <td>10.578555</td>
      <td>0.692248</td>
      <td>9.578555</td>
      <td>0.0</td>
      <td>9.578555</td>
      <td>0.0</td>
      <td>-100.0</td>
      <td>965.571655</td>
      <td>89.66214</td>
      <td>0.308801</td>
      <td>0.0</td>
      <td>9.578555</td>
      <td>-100.0</td>
      <td>None</td>
      <td>89.66214</td>
      <td>-27.777779</td>
      <td>1</td>
      <td>9.5709</td>
      <td>362.81214</td>
      <td>89.66214</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dfCmpPipes</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[25]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pk</th>
      <th>fkDE</th>
      <th>rk</th>
      <th>tk</th>
      <th>fkKI</th>
      <th>fkKK</th>
      <th>fkDTRO_ROWD</th>
      <th>fkLTGR</th>
      <th>fkSTRASSE</th>
      <th>L</th>
      <th>LZU</th>
      <th>RAU</th>
      <th>JLAMBS</th>
      <th>LAMBDA0</th>
      <th>ZEIN</th>
      <th>ZAUS</th>
      <th>ZUML</th>
      <th>ASOLL</th>
      <th>INDSCHALL</th>
      <th>BAUJAHR</th>
      <th>HAL</th>
      <th>fkCONT</th>
      <th>fk2LROHR</th>
      <th>BESCHREIBUNG</th>
      <th>GEOMWKB</th>
      <th>DELETED</th>
      <th>SELECT1</th>
      <th>IDREFERENZ</th>
      <th>KENNUNG</th>
      <th>IPLANUNG</th>
      <th>KVR</th>
      <th>pk_BZ</th>
      <th>fkDE_BZ</th>
      <th>fk</th>
      <th>QSVB</th>
      <th>IRTRENN</th>
      <th>LECKSTATUS</th>
      <th>LECKSTART</th>
      <th>LECKEND</th>
      <th>LECKORT</th>
      <th>LECKMENGE</th>
      <th>IMPTNZ</th>
      <th>ZVLIMPTNZ</th>
      <th>KANTENZV</th>
      <th>GEOM</th>
      <th>GRAF</th>
      <th>MId</th>
      <th>MText</th>
      <th>Basis</th>
      <th>Variante</th>
      <th>BZ</th>
      <th>Geaendert</th>
      <th>Erstellt</th>
      <th>pk_VMBZ</th>
      <th>fkBASIS</th>
      <th>fkVARIANTE</th>
      <th>fkBZ</th>
      <th>MZ</th>
      <th>MT</th>
      <th>pk_CONT</th>
      <th>fkDE_CONT</th>
      <th>rk_CONT</th>
      <th>tk_CONT</th>
      <th>ID_CONT</th>
      <th>NAME_CONT</th>
      <th>IDPARENT_CONT</th>
      <th>rkPARENT_CONT</th>
      <th>LFDNR_CONT</th>
      <th>GRAF_CONT</th>
      <th>FONT_CONT</th>
      <th>GEOM_CONT</th>
      <th>DELETED_CONT</th>
      <th>SELECT1_CONT</th>
      <th>IDREFERENZ_CONT</th>
      <th>NAME_DTRO</th>
      <th>DN</th>
      <th>DI</th>
      <th>DA</th>
      <th>S</th>
      <th>KT</th>
      <th>PN</th>
      <th>Am2</th>
      <th>Vm3</th>
      <th>NAME_LTGR</th>
      <th>NAME_STRASSE</th>
      <th>tk_i</th>
      <th>NAME_i</th>
      <th>tk_k</th>
      <th>NAME_k</th>
      <th>mx2NofPts</th>
      <th>dL</th>
      <th>mx2Idx</th>
      <th>(STAT, ROHR~*~*~*~A, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, ROHR~*~*~*~DTTR, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, ROHR~*~*~*~DWVERL, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, ROHR~*~*~*~DWVERLABS, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, ROHR~*~*~*~IAKTIV, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, ROHR~*~*~*~IRTRENN, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, ROHR~*~*~*~JV, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, ROHR~*~*~*~LAMBDA, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, ROHR~*~*~*~MAV, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, ROHR~*~*~*~PDAMPF, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, ROHR~*~*~*~PHR, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, ROHR~*~*~*~PMIN, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, ROHR~*~*~*~QMAV, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, ROHR~*~*~*~VAV, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, ROHR~*~*~*~VOLDA, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, ROHR~*~*~*~WVL, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, ROHR~*~*~*~ZAUS, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>(STAT, ROHR~*~*~*~ZEIN, 2025-04-08 09:45:59, 2025-04-08 09:45:59)</th>
      <th>('STAT', 'KNOT~*~*~*~PH', Timestamp('2025-04-08 09:45:59'), Timestamp('2025-04-08 09:45:59'))_i</th>
      <th>('STAT', 'KNOT~*~*~*~H', Timestamp('2025-04-08 09:45:59'), Timestamp('2025-04-08 09:45:59'))_i</th>
      <th>('STAT', 'KNOT~*~*~*~T', Timestamp('2025-04-08 09:45:59'), Timestamp('2025-04-08 09:45:59'))_i</th>
      <th>('STAT', 'KNOT~*~*~*~RHO', Timestamp('2025-04-08 09:45:59'), Timestamp('2025-04-08 09:45:59'))_i</th>
      <th>('STAT', 'KNOT~*~*~*~PH', Timestamp('2025-04-08 09:45:59'), Timestamp('2025-04-08 09:45:59'))_k</th>
      <th>('STAT', 'KNOT~*~*~*~H', Timestamp('2025-04-08 09:45:59'), Timestamp('2025-04-08 09:45:59'))_k</th>
      <th>('STAT', 'KNOT~*~*~*~T', Timestamp('2025-04-08 09:45:59'), Timestamp('2025-04-08 09:45:59'))_k</th>
      <th>('STAT', 'KNOT~*~*~*~RHO', Timestamp('2025-04-08 09:45:59'), Timestamp('2025-04-08 09:45:59'))_k</th>
      <th>QMAVAbs</th>
      <th>VAVAbs</th>
      <th>PHRAbs</th>
      <th>JVAbs</th>
      <th>MAV</th>
      <th>LAMBDA</th>
      <th>ppID</th>
      <th>v_mean_m_per_s</th>
      <th>p_from_bar</th>
      <th>p_to_bar</th>
      <th>t_from_k</th>
      <th>t_to_k</th>
      <th>t_outlet_k</th>
      <th>mdot_from_kg_per_s</th>
      <th>mdot_to_kg_per_s</th>
      <th>vdot_m3_per_s</th>
      <th>reynolds</th>
      <th>lambda</th>
      <th>t_from_C</th>
      <th>t_to_C</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>5436899515124385631</td>
      <td>4982567935033599504</td>
      <td>5436899515124385631</td>
      <td>5436899515124385631</td>
      <td>5545156887373324999</td>
      <td>4658286599152640406</td>
      <td>5456839515335324031</td>
      <td>5515842498618683031</td>
      <td>-1</td>
      <td>1000.0</td>
      <td>None</td>
      <td>0.25</td>
      <td>1.0</td>
      <td>0.025</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>1000.0</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>5060822126933396627</td>
      <td>-1</td>
      <td>Template Element for single Pipe Creation</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>3S5201225267441779810</td>
      <td>NaN</td>
      <td>1.0</td>
      <td>NaN</td>
      <td>4741144811589278980</td>
      <td>4804028781596645401</td>
      <td>5436899515124385631</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>b'\x01\x02\x00\x00\x00\x02\x00\x00\x00\x00\x00...</td>
      <td>b'\x00\x00\x80?\x00\x00\x00\x00\x01\x00\x00\x0...</td>
      <td>M-1-0-1</td>
      <td></td>
      <td>B1</td>
      <td>V0</td>
      <td>BZ1</td>
      <td>2025-05-09 13:17:45</td>
      <td>2025-04-08 11:45:59</td>
      <td>5703508123076770847</td>
      <td>4982567935033599504</td>
      <td>5151772185690695097</td>
      <td>4804028781596645401</td>
      <td>1</td>
      <td>1</td>
      <td>5060822126933396627</td>
      <td>4982567935033599504</td>
      <td>5060822126933396627</td>
      <td>5060822126933396627</td>
      <td>1001.0</td>
      <td>M-1-0-1</td>
      <td>1001.0</td>
      <td>5060822126933396627</td>
      <td>None</td>
      <td>None</td>
      <td>None</td>
      <td>b'\x00\x00\x80?\x01\x00\x00\x00\x01\x00\x00\x0...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>None</td>
      <td>STDROHR</td>
      <td>xxx</td>
      <td>200.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.494</td>
      <td>0.0</td>
      <td>0.031416</td>
      <td>31.415927</td>
      <td>STDROHR</td>
      <td>None</td>
      <td>5545156887373324999</td>
      <td>j1</td>
      <td>4658286599152640406</td>
      <td>j2</td>
      <td>11</td>
      <td>100.0</td>
      <td>0</td>
      <td>0.0</td>
      <td>0.308801</td>
      <td>39.43655</td>
      <td>39.43655</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.414041</td>
      <td>0.021201</td>
      <td>27.777779</td>
      <td>0.696674</td>
      <td>0.414041</td>
      <td>10.578555</td>
      <td>100.0</td>
      <td>0.899538</td>
      <td>-3.333333e+32</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>10.0</td>
      <td>10.0</td>
      <td>90.0</td>
      <td>965.200012</td>
      <td>9.578555</td>
      <td>9.578555</td>
      <td>89.66214</td>
      <td>965.571655</td>
      <td>100.0</td>
      <td>0.899538</td>
      <td>0.414041</td>
      <td>0.414041</td>
      <td>27.777779</td>
      <td>0.021201</td>
      <td>0</td>
      <td>0.915959</td>
      <td>10.0</td>
      <td>9.5709</td>
      <td>363.15</td>
      <td>362.81214</td>
      <td>362.81214</td>
      <td>27.777779</td>
      <td>-27.777779</td>
      <td>0.028776</td>
      <td>561271.686993</td>
      <td>0.021193</td>
      <td>90.0</td>
      <td>89.66214</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[26]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">math</span>

<span class="k">def</span> <span class="nf">fCmp2</span><span class="p">(</span><span class="n">row</span>
         <span class="p">,</span><span class="n">col1</span>
         <span class="p">,</span><span class="n">col2</span>
         <span class="p">,</span><span class="n">col2Offset</span><span class="o">=</span><span class="mf">0.</span>
         <span class="p">,</span><span class="n">dAbsMax</span><span class="o">=</span><span class="mf">0.01</span> <span class="c1"># max. tol. Abw.</span>
         <span class="p">,</span><span class="n">dProzMax</span><span class="o">=</span><span class="mf">0.1</span> <span class="c1"># max. tol. Abw. in %</span>
    <span class="p">):</span>

    <span class="c1">#print(row)</span>
    <span class="c1">#print(dAbsMax)</span>
    <span class="n">d</span><span class="o">=</span><span class="n">row</span><span class="p">[</span><span class="n">col1</span><span class="p">]</span><span class="o">-</span><span class="p">(</span><span class="n">row</span><span class="p">[</span><span class="n">col2</span><span class="p">]</span><span class="o">+</span><span class="n">col2Offset</span><span class="p">)</span>
    <span class="n">dAbs</span><span class="o">=</span><span class="n">math</span><span class="o">.</span><span class="n">fabs</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>


    <span class="n">dProz</span><span class="o">=</span><span class="n">dAbs</span><span class="o">/</span><span class="n">row</span><span class="p">[</span><span class="n">col1</span><span class="p">]</span><span class="o">*</span><span class="mi">100</span>


    <span class="n">l</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;color: red&#39;</span> <span class="k">if</span> <span class="n">dProz</span> <span class="o">&gt;</span> <span class="n">dProzMax</span> <span class="ow">or</span> <span class="n">dAbs</span> <span class="o">&gt;</span> <span class="n">dAbsMax</span> <span class="k">else</span> <span class="s1">&#39;color: green&#39;</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="n">row</span><span class="p">]</span>
    <span class="k">return</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="n">l</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span>

<span class="k">def</span> <span class="nf">stylerJunctions</span><span class="p">(</span><span class="n">styler</span><span class="p">):</span>
    <span class="n">styler</span><span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s2">&quot;SIR 3S vs. pp: Junctions&quot;</span><span class="p">)</span>
    <span class="n">styler</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="s1">&#39;PH&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">{:,.3f}</span><span class="s1">&#39;</span><span class="p">,</span>
        <span class="s1">&#39;p_bar&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">{:,.3f}</span><span class="s1">&#39;</span><span class="p">,</span>
        <span class="s1">&#39;T&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">{:,.2f}</span><span class="s1">&#39;</span><span class="p">,</span>
        <span class="s1">&#39;t_k&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">{:,.2f}</span><span class="s1">&#39;</span><span class="p">,</span>
        <span class="s1">&#39;t_C&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">{:,.2f}</span><span class="s1">&#39;</span><span class="p">,</span>
    <span class="p">},</span>
    <span class="n">na_rep</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span>
    <span class="n">precision</span><span class="o">=</span><span class="mi">0</span>
    <span class="p">)</span>


    <span class="n">styler</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">fCmp2</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;PH&#39;</span><span class="p">,</span><span class="s1">&#39;p_bar&#39;</span><span class="p">],</span><span class="n">col1</span><span class="o">=</span><span class="s1">&#39;PH&#39;</span><span class="p">,</span><span class="n">col2</span><span class="o">=</span><span class="s1">&#39;p_bar&#39;</span><span class="p">,</span><span class="n">dAbsMax</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span>

    <span class="n">styler</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">fCmp2</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;T&#39;</span><span class="p">,</span><span class="s1">&#39;t_k&#39;</span><span class="p">],</span><span class="n">col1</span><span class="o">=</span><span class="s1">&#39;T&#39;</span><span class="p">,</span><span class="n">col2</span><span class="o">=</span><span class="s1">&#39;t_k&#39;</span><span class="p">,</span><span class="n">dAbsMax</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span><span class="n">col2Offset</span><span class="o">=-</span><span class="mf">273.15</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">styler</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dfCmpJunctions</span><span class="p">[[</span><span class="s1">&#39;NAME&#39;</span><span class="p">,</span><span class="s1">&#39;PH&#39;</span><span class="p">,</span><span class="s1">&#39;p_bar&#39;</span><span class="p">,</span><span class="s1">&#39;T&#39;</span><span class="p">,</span><span class="s1">&#39;t_k&#39;</span><span class="p">,</span><span class="s1">&#39;t_C&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">stylerJunctions</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[27]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<style type="text/css">
#T_bb994_row0_col2, #T_bb994_row0_col4, #T_bb994_row1_col2, #T_bb994_row1_col4 {
  color: green;
}
</style>
<table id="T_bb994">
  <caption>SIR 3S vs. pp: Junctions</caption>
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th id="T_bb994_level0_col0" class="col_heading level0 col0" >NAME</th>
      <th id="T_bb994_level0_col1" class="col_heading level0 col1" >PH</th>
      <th id="T_bb994_level0_col2" class="col_heading level0 col2" >p_bar</th>
      <th id="T_bb994_level0_col3" class="col_heading level0 col3" >T</th>
      <th id="T_bb994_level0_col4" class="col_heading level0 col4" >t_k</th>
      <th id="T_bb994_level0_col5" class="col_heading level0 col5" >t_C</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_bb994_level0_row0" class="row_heading level0 row0" >3</th>
      <td id="T_bb994_row0_col0" class="data row0 col0" >j1</td>
      <td id="T_bb994_row0_col1" class="data row0 col1" >10.000</td>
      <td id="T_bb994_row0_col2" class="data row0 col2" >10.000</td>
      <td id="T_bb994_row0_col3" class="data row0 col3" >90.00</td>
      <td id="T_bb994_row0_col4" class="data row0 col4" >363.15</td>
      <td id="T_bb994_row0_col5" class="data row0 col5" >90.00</td>
    </tr>
    <tr>
      <th id="T_bb994_level0_row1" class="row_heading level0 row1" >4</th>
      <td id="T_bb994_row1_col0" class="data row1 col0" >j2</td>
      <td id="T_bb994_row1_col1" class="data row1 col1" >9.579</td>
      <td id="T_bb994_row1_col2" class="data row1 col2" >9.571</td>
      <td id="T_bb994_row1_col3" class="data row1 col3" >89.66</td>
      <td id="T_bb994_row1_col4" class="data row1 col4" >362.81</td>
      <td id="T_bb994_row1_col5" class="data row1 col5" >89.66</td>
    </tr>
  </tbody>
</table></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[28]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><br/><span></span><span class="k">def</span> <span class="nf">stylerPipes</span><span class="p">(</span><span class="n">styler</span><span class="p">):</span>
    <span class="n">styler</span><span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s2">&quot;SIR 3S vs. pp: Pipes&quot;</span><span class="p">)</span>
    <span class="n">styler</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
    <span class="p">{</span>
        <span class="s1">&#39;QMAVAbs&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">{:,.2f}</span><span class="s1">&#39;</span><span class="p">,</span>
        <span class="s1">&#39;mdot_from_kg_per_s&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">{:,.2f}</span><span class="s1">&#39;</span><span class="p">,</span>
        <span class="s1">&#39;MAV&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">{:,.2f}</span><span class="s1">&#39;</span><span class="p">,</span>
        <span class="s1">&#39;LAMBDA&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">{:,.5f}</span><span class="s1">&#39;</span><span class="p">,</span>
        <span class="s1">&#39;lambda&#39;</span><span class="p">:</span> <span class="s1">&#39;</span><span class="si">{:,.5f}</span><span class="s1">&#39;</span><span class="p">,</span>

    <span class="p">},</span>
    <span class="n">na_rep</span><span class="o">=</span><span class="s1">&#39;-&#39;</span><span class="p">,</span>
    <span class="n">precision</span><span class="o">=</span><span class="mi">0</span>
    <span class="p">)</span>


    <span class="n">styler</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">fCmp2</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;LAMBDA&#39;</span><span class="p">,</span><span class="s1">&#39;lambda&#39;</span><span class="p">],</span><span class="n">col1</span><span class="o">=</span><span class="s1">&#39;LAMBDA&#39;</span><span class="p">,</span><span class="n">col2</span><span class="o">=</span><span class="s1">&#39;lambda&#39;</span><span class="p">,</span><span class="n">dAbsMax</span><span class="o">=</span><span class="mf">0.00001</span><span class="p">)</span>

    <span class="n">styler</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">fCmp2</span><span class="p">,</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">subset</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;MAV&#39;</span><span class="p">,</span><span class="s1">&#39;mdot_from_kg_per_s&#39;</span><span class="p">],</span><span class="n">col1</span><span class="o">=</span><span class="s1">&#39;MAV&#39;</span><span class="p">,</span><span class="n">col2</span><span class="o">=</span><span class="s1">&#39;mdot_from_kg_per_s&#39;</span><span class="p">,</span><span class="n">dAbsMax</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span>





    <span class="k">return</span> <span class="n">styler</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dfCmpPipes</span><span class="p">[[</span><span class="s1">&#39;NAME_i&#39;</span><span class="p">,</span><span class="s1">&#39;NAME_k&#39;</span><span class="p">,</span><span class="s1">&#39;QMAVAbs&#39;</span><span class="p">,</span><span class="s1">&#39;MAV&#39;</span><span class="p">,</span> <span class="s1">&#39;mdot_from_kg_per_s&#39;</span><span class="p">,</span><span class="s1">&#39;LAMBDA&#39;</span><span class="p">,</span><span class="s1">&#39;lambda&#39;</span><span class="p">,</span><span class="s1">&#39;reynolds&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">stylerPipes</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[29]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<style type="text/css">
#T_25bc2_row0_col4, #T_25bc2_row0_col6 {
  color: green;
}
</style>
<table id="T_25bc2">
  <caption>SIR 3S vs. pp: Pipes</caption>
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th id="T_25bc2_level0_col0" class="col_heading level0 col0" >NAME_i</th>
      <th id="T_25bc2_level0_col1" class="col_heading level0 col1" >NAME_k</th>
      <th id="T_25bc2_level0_col2" class="col_heading level0 col2" >QMAVAbs</th>
      <th id="T_25bc2_level0_col3" class="col_heading level0 col3" >MAV</th>
      <th id="T_25bc2_level0_col4" class="col_heading level0 col4" >mdot_from_kg_per_s</th>
      <th id="T_25bc2_level0_col5" class="col_heading level0 col5" >LAMBDA</th>
      <th id="T_25bc2_level0_col6" class="col_heading level0 col6" >lambda</th>
      <th id="T_25bc2_level0_col7" class="col_heading level0 col7" >reynolds</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_25bc2_level0_row0" class="row_heading level0 row0" >0</th>
      <td id="T_25bc2_row0_col0" class="data row0 col0" >j1</td>
      <td id="T_25bc2_row0_col1" class="data row0 col1" >j2</td>
      <td id="T_25bc2_row0_col2" class="data row0 col2" >100.00</td>
      <td id="T_25bc2_row0_col3" class="data row0 col3" >27.78</td>
      <td id="T_25bc2_row0_col4" class="data row0 col4" >27.78</td>
      <td id="T_25bc2_row0_col5" class="data row0 col5" >0.02120</td>
      <td id="T_25bc2_row0_col6" class="data row0 col6" >0.02119</td>
      <td id="T_25bc2_row0_col7" class="data row0 col7" >561272</td>
    </tr>
  </tbody>
</table></div>
</div>
</section>
</section>
<section id="example-for-determining-roughness">
<h1>example for determining roughness<a class="headerlink" href="#example-for-determining-roughness" title="Permalink to this heading"></a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[30]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">fDetRau</span><span class="p">(</span><span class="n">net</span><span class="o">=</span><span class="n">net</span><span class="p">,</span> <span class="n">pSoll</span><span class="o">=</span><span class="mf">9.4</span><span class="p">,</span> <span class="n">dk</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>

    <span class="n">pIst</span><span class="o">=</span><span class="n">net</span><span class="o">.</span><span class="n">res_junction</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;p_bar&#39;</span><span class="p">]</span>
    <span class="n">dp</span><span class="o">=</span><span class="n">pSoll</span><span class="o">-</span><span class="n">pIst</span>

    <span class="k">if</span> <span class="n">math</span><span class="o">.</span><span class="n">fabs</span><span class="p">(</span><span class="n">dp</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mf">0.001</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;pIst=</span><span class="si">{</span><span class="n">pIst</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2"> dp=</span><span class="si">{</span><span class="n">dp</span><span class="si">:</span><span class="s2">.3f</span><span class="si">}</span><span class="s2"> k=</span><span class="si">{</span><span class="n">net</span><span class="o">.</span><span class="n">pipe</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;k_mm&#39;</span><span class="p">]</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2"> (dk=</span><span class="si">{</span><span class="n">dk</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
        <span class="k">return</span><span class="p">(</span><span class="n">pIst</span><span class="p">,</span><span class="n">net</span><span class="o">.</span><span class="n">pipe</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;k_mm&#39;</span><span class="p">])</span>

    <span class="n">dpVStart</span><span class="o">=</span><span class="n">math</span><span class="o">.</span><span class="n">copysign</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">dp</span><span class="p">)</span>
    <span class="n">dpV</span><span class="o">=</span><span class="n">dpVStart</span>

    <span class="k">while</span> <span class="n">dpV</span> <span class="o">==</span> <span class="n">dpVStart</span><span class="p">:</span>

        <span class="c1"># Rauheit veraendern</span>
        <span class="k">if</span> <span class="n">dp</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">dkAdd</span><span class="o">=-</span><span class="n">dk</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">dkAdd</span><span class="o">=</span><span class="n">dk</span>

        <span class="n">net</span><span class="o">.</span><span class="n">pipe</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;k_mm&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">net</span><span class="o">.</span><span class="n">pipe</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="s1">&#39;k_mm&#39;</span><span class="p">]</span><span class="o">+</span><span class="n">dkAdd</span>

        <span class="c1"># rechnen</span>
        <span class="n">pandapipes</span><span class="o">.</span><span class="n">pipeflow</span><span class="p">(</span><span class="n">net</span>
                <span class="p">,</span><span class="n">friction_model</span><span class="o">=</span><span class="s1">&#39;colebrook&#39;</span>
                <span class="c1">#,mode=&#39;sequential&#39;</span>
                <span class="p">)</span>

        <span class="n">pIst</span><span class="o">=</span><span class="n">net</span><span class="o">.</span><span class="n">res_junction</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="s1">&#39;p_bar&#39;</span><span class="p">]</span>
        <span class="n">dp</span><span class="o">=</span><span class="n">pSoll</span><span class="o">-</span><span class="n">pIst</span>

        <span class="n">dpV</span><span class="o">=</span><span class="n">math</span><span class="o">.</span><span class="n">copysign</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">dp</span><span class="p">)</span>

    <span class="n">fDetRau</span><span class="p">(</span><span class="n">net</span><span class="o">=</span><span class="n">net</span><span class="p">,</span> <span class="n">pSoll</span><span class="o">=</span><span class="mf">9.4</span><span class="p">,</span> <span class="n">dk</span><span class="o">=</span><span class="n">dk</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
<br/></pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[31]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fDetRau</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
pIst=9.400 dp=0.000 k=0.9062 (dk=0.0078)
</pre></div></div>
</div>
</section>
<section id="Example-using-pnh">
<h1>Example using pnh<a class="headerlink" href="#Example-using-pnh" title="Permalink to this heading"></a></h1>
<section id="installation">
<h2>installation<a class="headerlink" href="#installation" title="Permalink to this heading"></a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[32]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span>-U<span class="w"> </span>pnh
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Requirement already satisfied: pnh in c:\users\wolters\appdata\local\anaconda3\lib\site-packages (0.0.8)
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[33]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">pnh.utils.gen_model_from_nx</span> <span class="kn">import</span> <span class="n">pp</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">utils.gen_model_from_nx</span> <span class="kn">import</span> <span class="n">pp</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[34]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">pnh.utils.gen_model_from_nx</span> <span class="k">as</span> <span class="nn">gen_model_from_nx</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">utils.gen_model_from_nx</span> <span class="k">as</span> <span class="nn">gen_model_from_nx</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[35]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">importlib</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[36]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#importlib.reload(gen_model_from_nx)</span>
<span class="c1"># should be \\AppData\\Local\\anaconda3\\Lib\\site-packages...</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m</span><span class="o">.</span><span class="n">G</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[37]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;networkx.classes.graph.Graph at 0x24f2f9fb0d0&gt;
</pre></div></div>
</div>
</section>
<section id="generating-pp-model">
<h2>generating pp model<a class="headerlink" href="#generating-pp-model" title="Permalink to this heading"></a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[38]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="s1">&#39;j1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;extPressure&#39;</span><span class="p">:</span><span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="s1">&#39;j1&#39;</span><span class="p">][</span><span class="s1">&#39;PH&#39;</span><span class="p">]})</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[39]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="s1">&#39;j2&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;extFlow&#39;</span><span class="p">:</span><span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="s1">&#39;j2&#39;</span><span class="p">][</span><span class="s1">&#39;M&#39;</span><span class="p">]})</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[40]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ppn</span><span class="o">=</span><span class="n">pp</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">G</span>
       <span class="p">,</span><span class="n">fluid</span><span class="o">=</span><span class="s1">&#39;water&#39;</span>
       <span class="p">,</span><span class="n">TNet</span><span class="o">=</span><span class="mf">273.15</span><span class="o">+</span><span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="s1">&#39;j1&#39;</span><span class="p">][</span><span class="s1">&#39;T&#39;</span><span class="p">]</span>
       <span class="p">,</span><span class="n">pNet</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="s1">&#39;j1&#39;</span><span class="p">][</span><span class="s1">&#39;PH&#39;</span><span class="p">]</span>
       <span class="p">,</span><span class="n">z</span><span class="o">=</span><span class="s1">&#39;ZKOR&#39;</span>
       <span class="p">,</span><span class="n">diameter</span><span class="o">=</span><span class="s1">&#39;DI&#39;</span>
       <span class="p">,</span><span class="n">k</span><span class="o">=</span><span class="s1">&#39;RAU&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[41]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pandapipes</span><span class="o">.</span><span class="n">pipeflow</span><span class="p">(</span><span class="n">ppn</span><span class="p">,</span><span class="n">friction_model</span><span class="o">=</span><span class="s1">&#39;colebrook&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="generation-pp-model-with-heat-transfer">
<h2>generation pp model with heat transfer<a class="headerlink" href="#generation-pp-model-with-heat-transfer" title="Permalink to this heading"></a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[42]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="p">[</span><span class="s1">&#39;j1&#39;</span><span class="p">][</span><span class="s1">&#39;j2&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;alpha&#39;</span><span class="p">:</span><span class="mf">0.494</span><span class="p">,</span><span class="s1">&#39;Ta&#39;</span><span class="p">:</span><span class="mf">273.15</span><span class="o">+</span><span class="mf">10.</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[43]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="s1">&#39;j1&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;inletTemperature&#39;</span><span class="p">:</span><span class="mf">273.15</span><span class="o">+</span><span class="mf">90.</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[44]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ppn</span><span class="o">=</span><span class="n">pp</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">G</span>
       <span class="p">,</span><span class="n">fluid</span><span class="o">=</span><span class="s1">&#39;water&#39;</span>
       <span class="p">,</span><span class="n">TNet</span><span class="o">=</span><span class="mf">273.15</span><span class="o">+</span><span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="s1">&#39;j1&#39;</span><span class="p">][</span><span class="s1">&#39;T&#39;</span><span class="p">]</span>
       <span class="p">,</span><span class="n">pNet</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="s1">&#39;j1&#39;</span><span class="p">][</span><span class="s1">&#39;PH&#39;</span><span class="p">]</span>
       <span class="p">,</span><span class="n">z</span><span class="o">=</span><span class="s1">&#39;ZKOR&#39;</span>
       <span class="p">,</span><span class="n">diameter</span><span class="o">=</span><span class="s1">&#39;DI&#39;</span>
       <span class="p">,</span><span class="n">k</span><span class="o">=</span><span class="s1">&#39;RAU&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[45]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pandapipes</span><span class="o">.</span><span class="n">pipeflow</span><span class="p">(</span><span class="n">ppn</span><span class="p">,</span><span class="n">friction_model</span><span class="o">=</span><span class="s1">&#39;colebrook&#39;</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;bidirectional&#39;</span>
                    <span class="p">,</span><span class="n">tol_p</span><span class="o">=</span><span class="mf">1.e-5</span><span class="p">,</span><span class="n">tol_res</span><span class="o">=</span><span class="mf">1.e-4</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<section id="id5">
<h3>compare results<a class="headerlink" href="#id5" title="Permalink to this heading"></a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[46]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1">#                                                                    from gen_model_from_nx.pp</span>
<span class="n">m</span><span class="o">.</span><span class="n">V3_KNOT</span><span class="p">[</span><span class="s1">&#39;ppID&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">V3_KNOT</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;NAME&#39;</span><span class="p">]][</span><span class="s1">&#39;ID&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="c1">#                                                                                    from gen_model_from_nx.pp</span>
<span class="n">m</span><span class="o">.</span><span class="n">V3_ROHR</span><span class="p">[</span><span class="s1">&#39;ppID&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">V3_ROHR</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="k">lambda</span> <span class="n">row</span><span class="p">:</span> <span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;NAME_i&#39;</span><span class="p">],</span><span class="n">row</span><span class="p">[</span><span class="s1">&#39;NAME_k&#39;</span><span class="p">]][</span><span class="s1">&#39;ID&#39;</span><span class="p">],</span><span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[47]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dfCmpJunctions</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">V3_KNOT</span><span class="p">,</span><span class="n">ppn</span><span class="o">.</span><span class="n">res_junction</span><span class="p">,</span><span class="n">left_on</span><span class="o">=</span><span class="s1">&#39;ppID&#39;</span><span class="p">,</span><span class="n">right_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">dfCmpPipes</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">V3_ROHR</span><span class="p">,</span><span class="n">ppn</span><span class="o">.</span><span class="n">res_pipe</span><span class="p">,</span><span class="n">left_on</span><span class="o">=</span><span class="s1">&#39;ppID&#39;</span><span class="p">,</span><span class="n">right_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">dfCmpJunctions</span><span class="p">[</span><span class="s1">&#39;t_C&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">dfCmpJunctions</span><span class="p">[</span><span class="s1">&#39;t_k&#39;</span><span class="p">]</span><span class="o">-</span><span class="mf">273.15</span>
<span class="n">dfCmpPipes</span><span class="p">[</span><span class="s1">&#39;t_from_C&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">dfCmpPipes</span><span class="p">[</span><span class="s1">&#39;t_from_k&#39;</span><span class="p">]</span><span class="o">-</span><span class="mf">273.15</span>
<span class="n">dfCmpPipes</span><span class="p">[</span><span class="s1">&#39;t_to_C&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">dfCmpPipes</span><span class="p">[</span><span class="s1">&#39;t_to_k&#39;</span><span class="p">]</span><span class="o">-</span><span class="mf">273.15</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[48]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dfCmpJunctions</span><span class="p">[[</span><span class="s1">&#39;NAME&#39;</span><span class="p">,</span><span class="s1">&#39;PH&#39;</span><span class="p">,</span><span class="s1">&#39;p_bar&#39;</span><span class="p">,</span><span class="s1">&#39;T&#39;</span><span class="p">,</span><span class="s1">&#39;t_k&#39;</span><span class="p">,</span><span class="s1">&#39;t_C&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">stylerJunctions</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[48]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<style type="text/css">
#T_568a4_row0_col2, #T_568a4_row0_col4, #T_568a4_row1_col2, #T_568a4_row1_col4 {
  color: green;
}
</style>
<table id="T_568a4">
  <caption>SIR 3S vs. pp: Junctions</caption>
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th id="T_568a4_level0_col0" class="col_heading level0 col0" >NAME</th>
      <th id="T_568a4_level0_col1" class="col_heading level0 col1" >PH</th>
      <th id="T_568a4_level0_col2" class="col_heading level0 col2" >p_bar</th>
      <th id="T_568a4_level0_col3" class="col_heading level0 col3" >T</th>
      <th id="T_568a4_level0_col4" class="col_heading level0 col4" >t_k</th>
      <th id="T_568a4_level0_col5" class="col_heading level0 col5" >t_C</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_568a4_level0_row0" class="row_heading level0 row0" >3</th>
      <td id="T_568a4_row0_col0" class="data row0 col0" >j1</td>
      <td id="T_568a4_row0_col1" class="data row0 col1" >10.000</td>
      <td id="T_568a4_row0_col2" class="data row0 col2" >10.000</td>
      <td id="T_568a4_row0_col3" class="data row0 col3" >90.00</td>
      <td id="T_568a4_row0_col4" class="data row0 col4" >363.15</td>
      <td id="T_568a4_row0_col5" class="data row0 col5" >90.00</td>
    </tr>
    <tr>
      <th id="T_568a4_level0_row1" class="row_heading level0 row1" >4</th>
      <td id="T_568a4_row1_col0" class="data row1 col0" >j2</td>
      <td id="T_568a4_row1_col1" class="data row1 col1" >9.579</td>
      <td id="T_568a4_row1_col2" class="data row1 col2" >9.571</td>
      <td id="T_568a4_row1_col3" class="data row1 col3" >89.66</td>
      <td id="T_568a4_row1_col4" class="data row1 col4" >362.81</td>
      <td id="T_568a4_row1_col5" class="data row1 col5" >89.66</td>
    </tr>
  </tbody>
</table></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[49]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dfCmpPipes</span><span class="p">[[</span><span class="s1">&#39;NAME_i&#39;</span><span class="p">,</span><span class="s1">&#39;NAME_k&#39;</span><span class="p">,</span><span class="s1">&#39;QMAVAbs&#39;</span><span class="p">,</span><span class="s1">&#39;MAV&#39;</span><span class="p">,</span> <span class="s1">&#39;mdot_from_kg_per_s&#39;</span><span class="p">,</span><span class="s1">&#39;LAMBDA&#39;</span><span class="p">,</span><span class="s1">&#39;lambda&#39;</span><span class="p">,</span><span class="s1">&#39;reynolds&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">stylerPipes</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[49]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<style type="text/css">
#T_f6641_row0_col4, #T_f6641_row0_col6 {
  color: green;
}
</style>
<table id="T_f6641">
  <caption>SIR 3S vs. pp: Pipes</caption>
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th id="T_f6641_level0_col0" class="col_heading level0 col0" >NAME_i</th>
      <th id="T_f6641_level0_col1" class="col_heading level0 col1" >NAME_k</th>
      <th id="T_f6641_level0_col2" class="col_heading level0 col2" >QMAVAbs</th>
      <th id="T_f6641_level0_col3" class="col_heading level0 col3" >MAV</th>
      <th id="T_f6641_level0_col4" class="col_heading level0 col4" >mdot_from_kg_per_s</th>
      <th id="T_f6641_level0_col5" class="col_heading level0 col5" >LAMBDA</th>
      <th id="T_f6641_level0_col6" class="col_heading level0 col6" >lambda</th>
      <th id="T_f6641_level0_col7" class="col_heading level0 col7" >reynolds</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_f6641_level0_row0" class="row_heading level0 row0" >0</th>
      <td id="T_f6641_row0_col0" class="data row0 col0" >j1</td>
      <td id="T_f6641_row0_col1" class="data row0 col1" >j2</td>
      <td id="T_f6641_row0_col2" class="data row0 col2" >100.00</td>
      <td id="T_f6641_row0_col3" class="data row0 col3" >27.78</td>
      <td id="T_f6641_row0_col4" class="data row0 col4" >27.78</td>
      <td id="T_f6641_row0_col5" class="data row0 col5" >0.02120</td>
      <td id="T_f6641_row0_col6" class="data row0 col6" >0.02119</td>
      <td id="T_f6641_row0_col7" class="data row0 col7" >561273</td>
    </tr>
  </tbody>
</table></div>
</div>
</section>
<section id="experiment:-set-D-to-SIR-3S'-VAV">
<h3>experiment: set D to SIR 3S’ VAV<a class="headerlink" href="#experiment:-set-D-to-SIR-3S'-VAV" title="Permalink to this heading"></a></h3>
<div class="math notranslate nohighlight">
\[\overline{D} = \sqrt{\frac{4}{\pi} \, \frac{m}{\rho} \, \frac{1}{\overline{v}}}\]</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[50]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">v_</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">V3_ROHR</span><span class="p">[</span><span class="s1">&#39;VAVAbs&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[51]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">v_</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[51]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
0.8995376825332642
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[52]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">D_</span><span class="o">=</span><span class="n">math</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="mi">4</span><span class="o">/</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">*</span><span class="mi">1</span><span class="o">/</span><span class="n">v_</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">fabs</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="s1">&#39;j2&#39;</span><span class="p">][</span><span class="s1">&#39;M&#39;</span><span class="p">])</span><span class="o">/</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="s1">&#39;j1&#39;</span><span class="p">,</span><span class="s1">&#39;j2&#39;</span><span class="p">][</span><span class="s1">&#39;RHO_i&#39;</span><span class="p">]))</span><span class="o">*</span><span class="mi">1000</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[53]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">D_</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[53]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
201.82988634654708
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[54]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="s1">&#39;j1&#39;</span><span class="p">,</span><span class="s1">&#39;j2&#39;</span><span class="p">][</span><span class="s1">&#39;D_&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">D_</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[55]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ppn</span><span class="o">=</span><span class="n">pp</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">G</span>
       <span class="p">,</span><span class="n">fluid</span><span class="o">=</span><span class="s1">&#39;water&#39;</span>
       <span class="p">,</span><span class="n">TNet</span><span class="o">=</span><span class="mf">273.15</span><span class="o">+</span><span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="s1">&#39;j1&#39;</span><span class="p">][</span><span class="s1">&#39;T&#39;</span><span class="p">]</span>
       <span class="p">,</span><span class="n">pNet</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="s1">&#39;j1&#39;</span><span class="p">][</span><span class="s1">&#39;PH&#39;</span><span class="p">]</span>
       <span class="p">,</span><span class="n">z</span><span class="o">=</span><span class="s1">&#39;ZKOR&#39;</span>
       <span class="p">,</span><span class="n">diameter</span><span class="o">=</span><span class="s1">&#39;D_&#39;</span>
       <span class="p">,</span><span class="n">k</span><span class="o">=</span><span class="s1">&#39;RAU&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[56]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pandapipes</span><span class="o">.</span><span class="n">pipeflow</span><span class="p">(</span><span class="n">ppn</span><span class="p">,</span><span class="n">friction_model</span><span class="o">=</span><span class="s1">&#39;colebrook&#39;</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;bidirectional&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[57]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dfCmpJunctions</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">V3_KNOT</span><span class="p">,</span><span class="n">ppn</span><span class="o">.</span><span class="n">res_junction</span><span class="p">,</span><span class="n">left_on</span><span class="o">=</span><span class="s1">&#39;ppID&#39;</span><span class="p">,</span><span class="n">right_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">dfCmpPipes</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">V3_ROHR</span><span class="p">,</span><span class="n">ppn</span><span class="o">.</span><span class="n">res_pipe</span><span class="p">,</span><span class="n">left_on</span><span class="o">=</span><span class="s1">&#39;ppID&#39;</span><span class="p">,</span><span class="n">right_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">dfCmpJunctions</span><span class="p">[</span><span class="s1">&#39;t_C&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">dfCmpJunctions</span><span class="p">[</span><span class="s1">&#39;t_k&#39;</span><span class="p">]</span><span class="o">-</span><span class="mf">273.15</span>
<span class="n">dfCmpPipes</span><span class="p">[</span><span class="s1">&#39;t_from_C&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">dfCmpPipes</span><span class="p">[</span><span class="s1">&#39;t_from_k&#39;</span><span class="p">]</span><span class="o">-</span><span class="mf">273.15</span>
<span class="n">dfCmpPipes</span><span class="p">[</span><span class="s1">&#39;t_to_C&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">dfCmpPipes</span><span class="p">[</span><span class="s1">&#39;t_to_k&#39;</span><span class="p">]</span><span class="o">-</span><span class="mf">273.15</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[58]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dfCmpJunctions</span><span class="p">[[</span><span class="s1">&#39;NAME&#39;</span><span class="p">,</span><span class="s1">&#39;PH&#39;</span><span class="p">,</span><span class="s1">&#39;p_bar&#39;</span><span class="p">,</span><span class="s1">&#39;T&#39;</span><span class="p">,</span><span class="s1">&#39;t_k&#39;</span><span class="p">,</span><span class="s1">&#39;t_C&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">stylerJunctions</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[58]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<style type="text/css">
#T_41e98_row0_col2, #T_41e98_row0_col4, #T_41e98_row1_col4 {
  color: green;
}
#T_41e98_row1_col2 {
  color: red;
}
</style>
<table id="T_41e98">
  <caption>SIR 3S vs. pp: Junctions</caption>
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th id="T_41e98_level0_col0" class="col_heading level0 col0" >NAME</th>
      <th id="T_41e98_level0_col1" class="col_heading level0 col1" >PH</th>
      <th id="T_41e98_level0_col2" class="col_heading level0 col2" >p_bar</th>
      <th id="T_41e98_level0_col3" class="col_heading level0 col3" >T</th>
      <th id="T_41e98_level0_col4" class="col_heading level0 col4" >t_k</th>
      <th id="T_41e98_level0_col5" class="col_heading level0 col5" >t_C</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_41e98_level0_row0" class="row_heading level0 row0" >3</th>
      <td id="T_41e98_row0_col0" class="data row0 col0" >j1</td>
      <td id="T_41e98_row0_col1" class="data row0 col1" >10.000</td>
      <td id="T_41e98_row0_col2" class="data row0 col2" >10.000</td>
      <td id="T_41e98_row0_col3" class="data row0 col3" >90.00</td>
      <td id="T_41e98_row0_col4" class="data row0 col4" >363.15</td>
      <td id="T_41e98_row0_col5" class="data row0 col5" >90.00</td>
    </tr>
    <tr>
      <th id="T_41e98_level0_row1" class="row_heading level0 row1" >4</th>
      <td id="T_41e98_row1_col0" class="data row1 col0" >j2</td>
      <td id="T_41e98_row1_col1" class="data row1 col1" >9.579</td>
      <td id="T_41e98_row1_col2" class="data row1 col2" >9.591</td>
      <td id="T_41e98_row1_col3" class="data row1 col3" >89.66</td>
      <td id="T_41e98_row1_col4" class="data row1 col4" >362.81</td>
      <td id="T_41e98_row1_col5" class="data row1 col5" >89.66</td>
    </tr>
  </tbody>
</table></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[59]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dfCmpPipes</span><span class="p">[[</span><span class="s1">&#39;NAME_i&#39;</span><span class="p">,</span><span class="s1">&#39;NAME_k&#39;</span><span class="p">,</span><span class="s1">&#39;QMAVAbs&#39;</span><span class="p">,</span><span class="s1">&#39;MAV&#39;</span><span class="p">,</span> <span class="s1">&#39;mdot_from_kg_per_s&#39;</span><span class="p">,</span><span class="s1">&#39;LAMBDA&#39;</span><span class="p">,</span><span class="s1">&#39;lambda&#39;</span><span class="p">,</span><span class="s1">&#39;reynolds&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">stylerPipes</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[59]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<style type="text/css">
#T_f53b5_row0_col4 {
  color: green;
}
#T_f53b5_row0_col6 {
  color: red;
}
</style>
<table id="T_f53b5">
  <caption>SIR 3S vs. pp: Pipes</caption>
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th id="T_f53b5_level0_col0" class="col_heading level0 col0" >NAME_i</th>
      <th id="T_f53b5_level0_col1" class="col_heading level0 col1" >NAME_k</th>
      <th id="T_f53b5_level0_col2" class="col_heading level0 col2" >QMAVAbs</th>
      <th id="T_f53b5_level0_col3" class="col_heading level0 col3" >MAV</th>
      <th id="T_f53b5_level0_col4" class="col_heading level0 col4" >mdot_from_kg_per_s</th>
      <th id="T_f53b5_level0_col5" class="col_heading level0 col5" >LAMBDA</th>
      <th id="T_f53b5_level0_col6" class="col_heading level0 col6" >lambda</th>
      <th id="T_f53b5_level0_col7" class="col_heading level0 col7" >reynolds</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_f53b5_level0_row0" class="row_heading level0 row0" >0</th>
      <td id="T_f53b5_row0_col0" class="data row0 col0" >j1</td>
      <td id="T_f53b5_row0_col1" class="data row0 col1" >j2</td>
      <td id="T_f53b5_row0_col2" class="data row0 col2" >100.00</td>
      <td id="T_f53b5_row0_col3" class="data row0 col3" >27.78</td>
      <td id="T_f53b5_row0_col4" class="data row0 col4" >27.78</td>
      <td id="T_f53b5_row0_col5" class="data row0 col5" >0.02120</td>
      <td id="T_f53b5_row0_col6" class="data row0 col6" >0.02115</td>
      <td id="T_f53b5_row0_col7" class="data row0 col7" >556184</td>
    </tr>
  </tbody>
</table></div>
</div>
</section>
</section>
<section id="determining-roughness-due-to-required-friction-pressure-loss">
<h2>determining roughness due to required friction pressure loss<a class="headerlink" href="#determining-roughness-due-to-required-friction-pressure-loss" title="Permalink to this heading"></a></h2>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[60]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">pnh.utils.calc_k_from_dp</span> <span class="kn">import</span> <span class="n">pp</span> <span class="k">as</span> <span class="n">ppk</span>
<span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">utils.calc_k_from_dp</span> <span class="kn">import</span> <span class="n">pp</span> <span class="k">as</span> <span class="n">ppk</span>
</pre></div>
</div>
</div>
<section id="1-pipe,-2-nodes-network">
<h3>1-pipe, 2-nodes network<a class="headerlink" href="#1-pipe,-2-nodes-network" title="Permalink to this heading"></a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[61]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ppn</span><span class="o">=</span><span class="n">pp</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">G</span>
       <span class="p">,</span><span class="n">fluid</span><span class="o">=</span><span class="s1">&#39;water&#39;</span>
       <span class="p">,</span><span class="n">TNet</span><span class="o">=</span><span class="mf">273.15</span><span class="o">+</span><span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="s1">&#39;j1&#39;</span><span class="p">][</span><span class="s1">&#39;T&#39;</span><span class="p">]</span>
       <span class="p">,</span><span class="n">pNet</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="s1">&#39;j1&#39;</span><span class="p">][</span><span class="s1">&#39;PH&#39;</span><span class="p">]</span>
       <span class="p">,</span><span class="n">z</span><span class="o">=</span><span class="s1">&#39;ZKOR&#39;</span>
       <span class="p">,</span><span class="n">diameter</span><span class="o">=</span><span class="s1">&#39;DI&#39;</span>
       <span class="p">,</span><span class="n">k</span><span class="o">=</span><span class="s1">&#39;RAU&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</section>
<section id="calculate-with-pp">
<h3>calculate with pp<a class="headerlink" href="#calculate-with-pp" title="Permalink to this heading"></a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[62]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pandapipes</span><span class="o">.</span><span class="n">pipeflow</span><span class="p">(</span><span class="n">ppn</span><span class="p">,</span><span class="n">friction_model</span><span class="o">=</span><span class="s1">&#39;colebrook&#39;</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;bidirectional&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[63]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dfCmpJunctions</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">V3_KNOT</span><span class="p">,</span><span class="n">ppn</span><span class="o">.</span><span class="n">res_junction</span><span class="p">,</span><span class="n">left_on</span><span class="o">=</span><span class="s1">&#39;ppID&#39;</span><span class="p">,</span><span class="n">right_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">dfCmpPipes</span><span class="o">=</span><span class="n">pd</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">V3_ROHR</span><span class="p">,</span><span class="n">ppn</span><span class="o">.</span><span class="n">res_pipe</span><span class="p">,</span><span class="n">left_on</span><span class="o">=</span><span class="s1">&#39;ppID&#39;</span><span class="p">,</span><span class="n">right_index</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="n">dfCmpJunctions</span><span class="p">[</span><span class="s1">&#39;t_C&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">dfCmpJunctions</span><span class="p">[</span><span class="s1">&#39;t_k&#39;</span><span class="p">]</span><span class="o">-</span><span class="mf">273.15</span>
<span class="n">dfCmpPipes</span><span class="p">[</span><span class="s1">&#39;t_from_C&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">dfCmpPipes</span><span class="p">[</span><span class="s1">&#39;t_from_k&#39;</span><span class="p">]</span><span class="o">-</span><span class="mf">273.15</span>
<span class="n">dfCmpPipes</span><span class="p">[</span><span class="s1">&#39;t_to_C&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">dfCmpPipes</span><span class="p">[</span><span class="s1">&#39;t_to_k&#39;</span><span class="p">]</span><span class="o">-</span><span class="mf">273.15</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[64]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dfCmpJunctions</span><span class="p">[[</span><span class="s1">&#39;NAME&#39;</span><span class="p">,</span><span class="s1">&#39;PH&#39;</span><span class="p">,</span><span class="s1">&#39;p_bar&#39;</span><span class="p">,</span><span class="s1">&#39;T&#39;</span><span class="p">,</span><span class="s1">&#39;t_k&#39;</span><span class="p">,</span><span class="s1">&#39;t_C&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">stylerJunctions</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[64]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<style type="text/css">
#T_100e1_row0_col2, #T_100e1_row0_col4, #T_100e1_row1_col2, #T_100e1_row1_col4 {
  color: green;
}
</style>
<table id="T_100e1">
  <caption>SIR 3S vs. pp: Junctions</caption>
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th id="T_100e1_level0_col0" class="col_heading level0 col0" >NAME</th>
      <th id="T_100e1_level0_col1" class="col_heading level0 col1" >PH</th>
      <th id="T_100e1_level0_col2" class="col_heading level0 col2" >p_bar</th>
      <th id="T_100e1_level0_col3" class="col_heading level0 col3" >T</th>
      <th id="T_100e1_level0_col4" class="col_heading level0 col4" >t_k</th>
      <th id="T_100e1_level0_col5" class="col_heading level0 col5" >t_C</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_100e1_level0_row0" class="row_heading level0 row0" >3</th>
      <td id="T_100e1_row0_col0" class="data row0 col0" >j1</td>
      <td id="T_100e1_row0_col1" class="data row0 col1" >10.000</td>
      <td id="T_100e1_row0_col2" class="data row0 col2" >10.000</td>
      <td id="T_100e1_row0_col3" class="data row0 col3" >90.00</td>
      <td id="T_100e1_row0_col4" class="data row0 col4" >363.15</td>
      <td id="T_100e1_row0_col5" class="data row0 col5" >90.00</td>
    </tr>
    <tr>
      <th id="T_100e1_level0_row1" class="row_heading level0 row1" >4</th>
      <td id="T_100e1_row1_col0" class="data row1 col0" >j2</td>
      <td id="T_100e1_row1_col1" class="data row1 col1" >9.579</td>
      <td id="T_100e1_row1_col2" class="data row1 col2" >9.571</td>
      <td id="T_100e1_row1_col3" class="data row1 col3" >89.66</td>
      <td id="T_100e1_row1_col4" class="data row1 col4" >362.81</td>
      <td id="T_100e1_row1_col5" class="data row1 col5" >89.66</td>
    </tr>
  </tbody>
</table></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[65]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dfCmpPipes</span><span class="p">[[</span><span class="s1">&#39;NAME_i&#39;</span><span class="p">,</span><span class="s1">&#39;NAME_k&#39;</span><span class="p">,</span><span class="s1">&#39;QMAVAbs&#39;</span><span class="p">,</span><span class="s1">&#39;MAV&#39;</span><span class="p">,</span> <span class="s1">&#39;mdot_from_kg_per_s&#39;</span><span class="p">,</span><span class="s1">&#39;LAMBDA&#39;</span><span class="p">,</span><span class="s1">&#39;lambda&#39;</span><span class="p">,</span><span class="s1">&#39;reynolds&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">stylerPipes</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[65]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<style type="text/css">
#T_567c0_row0_col4, #T_567c0_row0_col6 {
  color: green;
}
</style>
<table id="T_567c0">
  <caption>SIR 3S vs. pp: Pipes</caption>
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th id="T_567c0_level0_col0" class="col_heading level0 col0" >NAME_i</th>
      <th id="T_567c0_level0_col1" class="col_heading level0 col1" >NAME_k</th>
      <th id="T_567c0_level0_col2" class="col_heading level0 col2" >QMAVAbs</th>
      <th id="T_567c0_level0_col3" class="col_heading level0 col3" >MAV</th>
      <th id="T_567c0_level0_col4" class="col_heading level0 col4" >mdot_from_kg_per_s</th>
      <th id="T_567c0_level0_col5" class="col_heading level0 col5" >LAMBDA</th>
      <th id="T_567c0_level0_col6" class="col_heading level0 col6" >lambda</th>
      <th id="T_567c0_level0_col7" class="col_heading level0 col7" >reynolds</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_567c0_level0_row0" class="row_heading level0 row0" >0</th>
      <td id="T_567c0_row0_col0" class="data row0 col0" >j1</td>
      <td id="T_567c0_row0_col1" class="data row0 col1" >j2</td>
      <td id="T_567c0_row0_col2" class="data row0 col2" >100.00</td>
      <td id="T_567c0_row0_col3" class="data row0 col3" >27.78</td>
      <td id="T_567c0_row0_col4" class="data row0 col4" >27.78</td>
      <td id="T_567c0_row0_col5" class="data row0 col5" >0.02120</td>
      <td id="T_567c0_row0_col6" class="data row0 col6" >0.02119</td>
      <td id="T_567c0_row0_col7" class="data row0 col7" >561273</td>
    </tr>
  </tbody>
</table></div>
</div>
</section>
<section id="required-friction-loss">
<h3>required friction loss<a class="headerlink" href="#required-friction-loss" title="Permalink to this heading"></a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[66]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="s1">&#39;j1&#39;</span><span class="p">,</span><span class="s1">&#39;j2&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;dpFL_SP&#39;</span><span class="p">:</span><span class="mf">0.7</span><span class="p">})</span>
</pre></div>
</div>
</div>
</section>
<section id="calculate-roughness">
<h3>calculate roughness<a class="headerlink" href="#calculate-roughness" title="Permalink to this heading"></a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[67]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ppk</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="p">,</span><span class="n">ppn</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="s1">&#39;j1&#39;</span><span class="p">,</span><span class="s1">&#39;j2&#39;</span><span class="p">][</span><span class="s1">&#39;k_MV&#39;</span><span class="p">]</span>
<br/></pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[67]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
1.5
</pre></div></div>
</div>
</section>
<section id="control:-set-roughness-to-calculated-roughness">
<h3>control: set roughness to calculated roughness<a class="headerlink" href="#control:-set-roughness-to-calculated-roughness" title="Permalink to this heading"></a></h3>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[68]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="s1">&#39;j1&#39;</span><span class="p">,</span><span class="s1">&#39;j2&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;RAU_&#39;</span><span class="p">:</span><span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="s1">&#39;j1&#39;</span><span class="p">,</span><span class="s1">&#39;j2&#39;</span><span class="p">][</span><span class="s1">&#39;k_MV&#39;</span><span class="p">]})</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[69]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ppn</span><span class="o">=</span><span class="n">pp</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">G</span>
       <span class="p">,</span><span class="n">fluid</span><span class="o">=</span><span class="s1">&#39;water&#39;</span>
       <span class="p">,</span><span class="n">TNet</span><span class="o">=</span><span class="mf">273.15</span><span class="o">+</span><span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="s1">&#39;j1&#39;</span><span class="p">][</span><span class="s1">&#39;T&#39;</span><span class="p">]</span>
       <span class="p">,</span><span class="n">pNet</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="s1">&#39;j1&#39;</span><span class="p">][</span><span class="s1">&#39;PH&#39;</span><span class="p">]</span>
       <span class="p">,</span><span class="n">z</span><span class="o">=</span><span class="s1">&#39;ZKOR&#39;</span>
       <span class="p">,</span><span class="n">diameter</span><span class="o">=</span><span class="s1">&#39;DI&#39;</span>
       <span class="p">,</span><span class="n">k</span><span class="o">=</span><span class="s1">&#39;RAU_&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[70]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pandapipes</span><span class="o">.</span><span class="n">pipeflow</span><span class="p">(</span><span class="n">ppn</span><span class="p">,</span><span class="n">friction_model</span><span class="o">=</span><span class="s1">&#39;colebrook&#39;</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;bidirectional&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[71]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ppn</span><span class="o">.</span><span class="n">res_junction</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[71]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>p_bar</th>
      <th>t_k</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>10.000000</td>
      <td>363.150000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>9.300053</td>
      <td>362.812397</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
</section>
<section id="required-friction-loss-lower">
<h3>required friction loss lower<a class="headerlink" href="#required-friction-loss-lower" title="Permalink to this heading"></a></h3>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[72]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="s1">&#39;j1&#39;</span><span class="p">,</span><span class="s1">&#39;j2&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;dpFL_SP&#39;</span><span class="p">:</span><span class="mf">0.5</span><span class="p">})</span>
<span class="n">ppk</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="p">,</span><span class="n">ppn</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="s1">&#39;j1&#39;</span><span class="p">,</span><span class="s1">&#39;j2&#39;</span><span class="p">][</span><span class="s1">&#39;k_MV&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[72]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
0.4688125000000001
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[73]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="s1">&#39;j1&#39;</span><span class="p">,</span><span class="s1">&#39;j2&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;dpFL_SP&#39;</span><span class="p">:</span><span class="mf">0.1</span><span class="p">})</span>
<span class="n">ppk</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="p">,</span><span class="n">ppn</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="s1">&#39;j1&#39;</span><span class="p">,</span><span class="s1">&#39;j2&#39;</span><span class="p">][</span><span class="s1">&#39;k_MV&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[73]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
0.001
</pre></div></div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[74]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ppk</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="p">,</span><span class="n">ppn</span><span class="p">,</span><span class="n">k_min</span><span class="o">=</span><span class="mf">0.002</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="s1">&#39;j1&#39;</span><span class="p">,</span><span class="s1">&#39;j2&#39;</span><span class="p">][</span><span class="s1">&#39;k_MV&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[74]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
0.002
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[75]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="s1">&#39;j1&#39;</span><span class="p">,</span><span class="s1">&#39;j2&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;RAU_&#39;</span><span class="p">:</span><span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="s1">&#39;j1&#39;</span><span class="p">,</span><span class="s1">&#39;j2&#39;</span><span class="p">][</span><span class="s1">&#39;k_MV&#39;</span><span class="p">]})</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[76]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ppn</span><span class="o">=</span><span class="n">pp</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">G</span>
       <span class="p">,</span><span class="n">fluid</span><span class="o">=</span><span class="s1">&#39;water&#39;</span>
       <span class="p">,</span><span class="n">TNet</span><span class="o">=</span><span class="mf">273.15</span><span class="o">+</span><span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="s1">&#39;j1&#39;</span><span class="p">][</span><span class="s1">&#39;T&#39;</span><span class="p">]</span>
       <span class="p">,</span><span class="n">pNet</span><span class="o">=</span><span class="n">m</span><span class="o">.</span><span class="n">G</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="s1">&#39;j1&#39;</span><span class="p">][</span><span class="s1">&#39;PH&#39;</span><span class="p">]</span>
       <span class="p">,</span><span class="n">z</span><span class="o">=</span><span class="s1">&#39;ZKOR&#39;</span>
       <span class="p">,</span><span class="n">diameter</span><span class="o">=</span><span class="s1">&#39;DI&#39;</span>
       <span class="p">,</span><span class="n">k</span><span class="o">=</span><span class="s1">&#39;RAU_&#39;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[77]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pandapipes</span><span class="o">.</span><span class="n">pipeflow</span><span class="p">(</span><span class="n">ppn</span><span class="p">,</span><span class="n">friction_model</span><span class="o">=</span><span class="s1">&#39;colebrook&#39;</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;bidirectional&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[78]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ppn</span><span class="o">.</span><span class="n">res_junction</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[78]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>p_bar</th>
      <th>t_k</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>10.000000</td>
      <td>363.150000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>9.735941</td>
      <td>362.812397</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
</div>
</section>
</section>
</section>
<section id="determining-SIR-3S's-roughness-due-to-required-friction-pressure-loss">
<h1>determining SIR 3S’s roughness due to required friction pressure loss<a class="headerlink" href="#determining-SIR-3S's-roughness-due-to-required-friction-pressure-loss" title="Permalink to this heading"></a></h1>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[79]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">shutil</span>
<span class="kn">import</span> <span class="nn">xml.etree.ElementTree</span> <span class="k">as</span> <span class="nn">ET</span>
<span class="kn">import</span> <span class="nn">subprocess</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">networkx</span>

<span class="n">logging</span><span class="o">.</span><span class="n">getLogger</span><span class="p">(</span><span class="s1">&#39;PT3S&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">ERROR</span><span class="p">)</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">PT3S</span> <span class="kn">import</span> <span class="n">Mx</span>
<span class="k">except</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">Mx</span>

<span class="k">def</span> <span class="nf">sir3sk</span><span class="p">(</span>
    <span class="c1"># 2-node, 1-pipe SIR 3S Model</span>
    <span class="n">dbFile</span><span class="o">=</span><span class="n">dbFile</span>
    <span class="c1"># pipe-length in m</span>
   <span class="p">,</span><span class="n">L</span><span class="o">=</span><span class="mf">1000.</span>
    <span class="c1"># DN in mm</span>
   <span class="p">,</span><span class="n">DI</span><span class="o">=</span><span class="mf">200.</span>
   <span class="p">,</span><span class="n">DA</span><span class="o">=</span><span class="kc">None</span>
   <span class="p">,</span><span class="n">KT</span><span class="o">=</span><span class="kc">None</span>  <span class="c1"># W/(mK)</span>
   <span class="c1"># geodetic heights</span>
   <span class="p">,</span><span class="n">zi</span><span class="o">=</span><span class="kc">None</span> <span class="p">,</span><span class="n">zk</span><span class="o">=</span><span class="kc">None</span>
   <span class="c1"># inlet pressure in bar (== model unit); node i: PKON expected</span>
   <span class="p">,</span><span class="n">pi</span><span class="o">=</span><span class="kc">None</span>

   <span class="c1"># inlet temperature in °C</span>
   <span class="p">,</span><span class="n">Ti</span><span class="o">=</span><span class="mf">90.</span>
   <span class="c1"># outer temperature in °C</span>
   <span class="p">,</span><span class="n">Ta</span><span class="o">=</span><span class="mf">10.</span> <span class="c1"># not set in SIR 3S Model; should be SIR 3S Model outer temperature</span>

   <span class="c1"># flow in model unit; node k: QKON expected</span>
   <span class="p">,</span><span class="n">mk</span><span class="o">=</span><span class="kc">None</span>
   <span class="c1"># dp due to friction loss in bar</span>
   <span class="p">,</span><span class="n">dp_SP</span><span class="o">=</span><span class="mf">.5</span>
   <span class="p">,</span><span class="n">dp_ER</span><span class="o">=</span><span class="mf">0.001</span>
   <span class="p">,</span><span class="n">dkSir3sStart</span><span class="o">=</span><span class="mf">.01</span> <span class="c1"># dk start iteration step for k calculation in SIR 3S in mm</span>
   <span class="p">,</span><span class="n">k_min</span><span class="o">=</span><span class="mf">0.001</span> <span class="c1"># min. allowed k in mm</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Calculates k to achieve dp_SP</span>

<span class="sd">    Returns: k in mm</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">logStr</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">sys</span><span class="o">.</span><span class="n">_getframe</span><span class="p">()</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span><span class="si">}</span><span class="s2">:&quot;</span>

    <span class="c1"># read the model</span>
    <span class="n">m</span><span class="o">=</span><span class="n">dxAndMxHelperFcts</span><span class="o">.</span><span class="n">readDxAndMx</span><span class="p">(</span><span class="n">dbFile</span><span class="o">=</span><span class="n">dbFile</span>
    <span class="p">,</span><span class="n">maxRecords</span><span class="o">=-</span><span class="mi">1</span>
    <span class="p">,</span><span class="n">forceSir3sRead</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>

    <span class="n">SirCalcExe</span><span class="o">=</span><span class="sa">r</span><span class="s2">&quot;C:\3S\Sir3s\SirCalc-90-14-02-12_Potsdam.fix1_x64\SirCalc.exe&quot;</span>
    <span class="n">pOpenAr</span><span class="o">=</span><span class="p">[</span><span class="n">SirCalcExe</span>
       <span class="p">,</span><span class="s1">&#39;/rstnSpezial&#39;</span>
       <span class="p">,</span><span class="s1">&#39;/InteraktRgMax1000&#39;</span>
       <span class="p">,</span><span class="s1">&#39;/InteraktThMax1000&#39;</span>
       <span class="p">,</span><span class="n">m</span><span class="o">.</span><span class="n">SirCalcXmlFile</span><span class="p">]</span>

    <span class="c1"># read the model&#39;s Xml</span>
    <span class="n">tree</span> <span class="o">=</span> <span class="n">ET</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">SirCalcXmlFile</span><span class="p">)</span> <span class="c1"># ElementTree</span>
    <span class="n">root</span> <span class="o">=</span> <span class="n">tree</span><span class="o">.</span><span class="n">getroot</span><span class="p">()</span>  <span class="c1"># Element</span>

    <span class="c1"># set parameter #######################################</span>

    <span class="n">pathStr</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;./ROHR[@fkKI!=&#39;-1&#39;]&quot;</span>
    <span class="n">pipeEl</span><span class="o">=</span><span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">pathStr</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="n">pathStr</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;./DTRO_ROWD[@pk=&#39;</span><span class="si">{</span><span class="n">pipeEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fkDTRO_ROWD&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;]&quot;</span>
    <span class="n">DNEl</span><span class="o">=</span><span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">pathStr</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="n">pathStr</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;./KNOT[@pk=&#39;</span><span class="si">{</span><span class="n">pipeEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fkKI&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;]&quot;</span>
    <span class="n">nodeKiEl</span><span class="o">=</span><span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">pathStr</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">pathStr</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;./KNOT_BZ[@fk=&#39;</span><span class="si">{</span><span class="n">nodeKiEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;pk&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;]&quot;</span>
    <span class="n">nodeKiBzEl</span><span class="o">=</span><span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">pathStr</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="n">pathStr</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;./KNOT[@pk=&#39;</span><span class="si">{</span><span class="n">pipeEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fkKK&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;]&quot;</span>
    <span class="n">nodeKkEl</span><span class="o">=</span><span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">pathStr</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">pathStr</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;./KNOT_BZ[@fk=&#39;</span><span class="si">{</span><span class="n">nodeKkEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;pk&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;]&quot;</span>
    <span class="n">nodeKkBzEl</span><span class="o">=</span><span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">pathStr</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="c1"># pipe</span>
    <span class="k">if</span> <span class="n">L</span><span class="o">!=</span><span class="kc">None</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;set L to </span><span class="si">{</span><span class="n">L</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">pipeEl</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;L&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">L</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">DI</span><span class="o">!=</span><span class="kc">None</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;set DI to </span><span class="si">{</span><span class="n">DI</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">DNEl</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;DI&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">DI</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">DA</span><span class="o">!=</span><span class="kc">None</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;set DA to </span><span class="si">{</span><span class="n">DA</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">DNEl</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;DA&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">DA</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">KT</span><span class="o">!=</span><span class="kc">None</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;set KT to </span><span class="si">{</span><span class="n">KT</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">DNEl</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;KT&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">KT</span><span class="p">))</span>

    <span class="c1"># nodes z</span>
    <span class="k">if</span> <span class="n">zi</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;set zi to </span><span class="si">{</span><span class="n">zi</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">nodeKiEl</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;ZKOR&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zi</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">zk</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;set zk to </span><span class="si">{</span><span class="n">zk</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">nodeKkEl</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;ZKOR&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">zk</span><span class="p">))</span>

    <span class="c1"># nodes BC</span>
    <span class="k">if</span> <span class="n">pi</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;set pi to </span><span class="si">{</span><span class="n">pi</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">nodeKiBzEl</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;PH_EIN&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">pi</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">Ti</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;set TE to </span><span class="si">{</span><span class="n">Ti</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">nodeKiBzEl</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;TE&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">Ti</span><span class="p">))</span>
    <span class="k">if</span> <span class="n">mk</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;set mk to </span><span class="si">{</span><span class="n">mk</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">nodeKkBzEl</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;QM_EIN&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">mk</span><span class="p">))</span>
        <span class="n">nodeKkEl</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;QM_EIN&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">mk</span><span class="p">))</span> <span class="c1">#!</span>

    <span class="n">dz</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">nodeKiEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ZKOR&#39;</span><span class="p">))</span><span class="o">-</span><span class="nb">float</span><span class="p">(</span><span class="n">nodeKkEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;ZKOR&#39;</span><span class="p">))</span>

    <span class="c1"># write</span>
    <span class="n">tree</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">SirCalcXmlFile</span><span class="p">)</span>

    <span class="c1"># calculate</span>
    <span class="k">with</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">pOpenAr</span><span class="p">)</span> <span class="k">as</span> <span class="n">process</span><span class="p">:</span>
        <span class="n">process</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Command </span><span class="si">{</span><span class="n">process</span><span class="o">.</span><span class="n">args</span><span class="si">}</span><span class="s1"> exited with </span><span class="si">{</span><span class="n">process</span><span class="o">.</span><span class="n">returncode</span><span class="si">}</span><span class="s1">.&#39;</span><span class="p">)</span>

    <span class="c1"># read result</span>
    <span class="n">mx</span><span class="o">=</span><span class="n">Mx</span><span class="o">.</span><span class="n">Mx</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">mx</span><span class="o">.</span><span class="n">mx1File</span><span class="p">)</span>
    <span class="n">mx</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="n">col</span><span class="p">:</span><span class="n">col</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">Mx</span><span class="o">.</span><span class="n">reSir3sIDSep</span><span class="o">+</span><span class="n">mo</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s1">&#39;OBJTYPE_PK&#39;</span><span class="p">),</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">col</span><span class="p">,</span><span class="n">mo</span> <span class="ow">in</span> <span class="p">[(</span><span class="n">col</span><span class="p">,</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">Mx</span><span class="o">.</span><span class="n">reSir3sIDcompiled</span><span class="p">,</span><span class="n">col</span><span class="p">))</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">mx</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span> <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">Mx</span><span class="o">.</span><span class="n">reSir3sIDcompiled</span><span class="p">,</span><span class="n">col</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">]},</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># result-Channels</span>
    <span class="n">piCh</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;KNOT~</span><span class="si">{</span><span class="n">nodeKiEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;NAME&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">~~PH&quot;</span>
    <span class="n">pkCh</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;KNOT~</span><span class="si">{</span><span class="n">nodeKkEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;NAME&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">~~PH&quot;</span>
    <span class="n">dpCh</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;ROHR~</span><span class="si">{</span><span class="n">nodeKiEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;NAME&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">~</span><span class="si">{</span><span class="n">nodeKkEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;NAME&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">~PHR&quot;</span>
    <span class="n">rhoiCh</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;ROHR~</span><span class="si">{</span><span class="n">nodeKiEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;NAME&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">~</span><span class="si">{</span><span class="n">nodeKkEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;NAME&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">~RHOI&quot;</span>
    <span class="n">rhokCh</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;ROHR~</span><span class="si">{</span><span class="n">nodeKiEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;NAME&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">~</span><span class="si">{</span><span class="n">nodeKkEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;NAME&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">~RHOK&quot;</span>
    <span class="n">mkCh</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;KNOT~</span><span class="si">{</span><span class="n">nodeKkEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;NAME&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">~~QM&quot;</span>
    <span class="n">mkrawCh</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;KNOT~</span><span class="si">{</span><span class="n">nodeKkEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;NAME&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">~~M&quot;</span>

    <span class="c1"># determine start-k with pp</span>
    <span class="c1"># create network</span>
    <span class="n">nxg</span><span class="o">=</span><span class="n">networkx</span><span class="o">.</span><span class="n">Graph</span><span class="p">()</span>
    <span class="n">nxg</span><span class="o">.</span><span class="n">add_nodes_from</span><span class="p">([(</span><span class="mi">1</span><span class="p">,{</span><span class="s1">&#39;extPressure&#39;</span><span class="p">:</span><span class="n">mx</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="n">piCh</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]}),(</span><span class="mi">2</span><span class="p">,{</span><span class="s1">&#39;extFlow&#39;</span><span class="p">:</span><span class="n">mx</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="n">mkrawCh</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]})])</span>
    <span class="n">nxg</span><span class="o">.</span><span class="n">add_edges_from</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,{</span><span class="s1">&#39;L&#39;</span><span class="p">:</span><span class="n">L</span><span class="p">,</span><span class="s1">&#39;D&#39;</span><span class="p">:</span><span class="n">DI</span><span class="p">,</span><span class="s1">&#39;k&#39;</span><span class="p">:</span><span class="nb">float</span><span class="p">(</span><span class="n">pipeEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RAU&#39;</span><span class="p">))})])</span>

    <span class="k">if</span> <span class="n">KT</span><span class="o">!=</span><span class="kc">None</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;set alpha to KT:</span><span class="si">{</span><span class="n">KT</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">nxg</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;alpha&#39;</span><span class="p">:</span><span class="n">KT</span><span class="p">})</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;set alpha to:</span><span class="si">{</span><span class="nb">float</span><span class="p">(</span><span class="n">DNEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;KT&#39;</span><span class="p">))</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">nxg</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;alpha&#39;</span><span class="p">:</span><span class="nb">float</span><span class="p">(</span><span class="n">DNEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;KT&#39;</span><span class="p">))})</span>

    <span class="k">if</span> <span class="n">Ta</span><span class="o">!=</span><span class="kc">None</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;set Ta to </span><span class="si">{</span><span class="n">Ta</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="n">nxg</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;Ta&#39;</span><span class="p">:</span><span class="n">Ta</span><span class="o">+</span><span class="mf">273.15</span><span class="p">})</span>

    <span class="n">nxg</span><span class="o">.</span><span class="n">nodes</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;inletTemperature&#39;</span><span class="p">:</span><span class="n">Ti</span><span class="o">+</span><span class="mf">273.15</span><span class="p">})</span>

    <span class="n">ppn</span><span class="o">=</span><span class="n">pp</span><span class="p">(</span><span class="n">nxg</span><span class="p">)</span>
    <span class="c1"># calc network</span>
    <span class="n">pandapipes</span><span class="o">.</span><span class="n">pipeflow</span><span class="p">(</span><span class="n">ppn</span><span class="p">,</span><span class="n">friction_model</span><span class="o">=</span><span class="s1">&#39;colebrook&#39;</span><span class="p">,</span><span class="n">mode</span><span class="o">=</span><span class="s1">&#39;bidirectional&#39;</span><span class="p">)</span>
    <span class="c1"># friction loss setpoint</span>
    <span class="n">nxg</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s1">&#39;dpFL_SP&#39;</span><span class="p">:</span><span class="n">dp_SP</span><span class="p">})</span>
    <span class="c1"># calc k</span>
    <span class="n">ppk</span><span class="p">(</span><span class="n">nxg</span><span class="p">,</span><span class="n">ppn</span><span class="p">)</span>

    <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">logStr</span><span class="si">}</span><span class="s2"> k_pp: </span><span class="si">{</span><span class="n">nxg</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">][</span><span class="s1">&#39;k_MV&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="c1"># set k</span>
    <span class="n">pipeEl</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;RAU&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">nxg</span><span class="o">.</span><span class="n">edges</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">][</span><span class="s1">&#39;k_MV&#39;</span><span class="p">]))</span>
    <span class="c1"># write again</span>
    <span class="n">tree</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">SirCalcXmlFile</span><span class="p">)</span>
    <span class="c1"># calculate again</span>
    <span class="k">with</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">pOpenAr</span><span class="p">)</span> <span class="k">as</span> <span class="n">process</span><span class="p">:</span>
        <span class="n">process</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Command </span><span class="si">{</span><span class="n">process</span><span class="o">.</span><span class="n">args</span><span class="si">}</span><span class="s1"> exited with </span><span class="si">{</span><span class="n">process</span><span class="o">.</span><span class="n">returncode</span><span class="si">}</span><span class="s1">.&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">sir3s_calc_roughness</span><span class="p">(</span>
            <span class="n">dk</span><span class="o">=</span><span class="n">dkSir3sStart</span>
           <span class="p">,</span><span class="n">depth</span><span class="o">=</span><span class="mi">0</span>
    <span class="p">):</span>

        <span class="n">logStr</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">sys</span><span class="o">.</span><span class="n">_getframe</span><span class="p">()</span><span class="o">.</span><span class="n">f_code</span><span class="o">.</span><span class="n">co_name</span><span class="si">}</span><span class="s2">:&quot;</span>

        <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">logStr</span><span class="si">}</span><span class="s2"> Start. depth: </span><span class="si">{</span><span class="n">depth</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="c1"># read result</span>
        <span class="n">mx</span><span class="o">=</span><span class="n">Mx</span><span class="o">.</span><span class="n">Mx</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">mx</span><span class="o">.</span><span class="n">mx1File</span><span class="p">)</span>
        <span class="n">mx</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="n">col</span><span class="p">:</span><span class="n">col</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">Mx</span><span class="o">.</span><span class="n">reSir3sIDSep</span><span class="o">+</span><span class="n">mo</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s1">&#39;OBJTYPE_PK&#39;</span><span class="p">),</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">col</span><span class="p">,</span><span class="n">mo</span> <span class="ow">in</span> <span class="p">[(</span><span class="n">col</span><span class="p">,</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">Mx</span><span class="o">.</span><span class="n">reSir3sIDcompiled</span><span class="p">,</span><span class="n">col</span><span class="p">))</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">mx</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span> <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">Mx</span><span class="o">.</span><span class="n">reSir3sIDcompiled</span><span class="p">,</span><span class="n">col</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">]},</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="c1"># result-Channels</span>
        <span class="n">pathStr</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;./ROHR[@fkKI!=&#39;-1&#39;]&quot;</span>
        <span class="n">pipeEl</span><span class="o">=</span><span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">pathStr</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">pathStr</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;./KNOT[@pk=&#39;</span><span class="si">{</span><span class="n">pipeEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fkKI&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;]&quot;</span>
        <span class="n">nodeKiEl</span><span class="o">=</span><span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">pathStr</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

        <span class="n">pathStr</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;./KNOT[@pk=&#39;</span><span class="si">{</span><span class="n">pipeEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;fkKK&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">&#39;]&quot;</span>
        <span class="n">nodeKkEl</span><span class="o">=</span><span class="n">root</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="n">pathStr</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

        <span class="c1"># result-Channels</span>
        <span class="n">piCh</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;KNOT~</span><span class="si">{</span><span class="n">nodeKiEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;NAME&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">~~PH&quot;</span>
        <span class="n">pkCh</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;KNOT~</span><span class="si">{</span><span class="n">nodeKkEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;NAME&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">~~PH&quot;</span>
        <span class="n">dpCh</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;ROHR~</span><span class="si">{</span><span class="n">nodeKiEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;NAME&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">~</span><span class="si">{</span><span class="n">nodeKkEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;NAME&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">~PHR&quot;</span>
        <span class="n">rhoiCh</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;ROHR~</span><span class="si">{</span><span class="n">nodeKiEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;NAME&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">~</span><span class="si">{</span><span class="n">nodeKkEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;NAME&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">~RHOI&quot;</span>
        <span class="n">rhokCh</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;ROHR~</span><span class="si">{</span><span class="n">nodeKiEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;NAME&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">~</span><span class="si">{</span><span class="n">nodeKkEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;NAME&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">~RHOK&quot;</span>
        <span class="n">mkCh</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;KNOT~</span><span class="si">{</span><span class="n">nodeKkEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;NAME&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">~~QM&quot;</span>

        <span class="c1"># calculate deviation</span>
        <span class="n">dp</span><span class="o">=</span><span class="n">mx</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="n">piCh</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">mx</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="n">pkCh</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="c1">#mx.df[dpCh].iloc[0]</span>

        <span class="n">rho</span><span class="o">=</span><span class="mf">.5</span><span class="o">*</span><span class="p">(</span><span class="n">mx</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="n">rhoiCh</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="n">mx</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="n">rhokCh</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">dp_DZ</span><span class="o">=</span><span class="n">dz</span><span class="o">*</span><span class="n">rho</span><span class="o">*</span><span class="mf">9.81</span><span class="o">*</span><span class="mf">1.e-5</span>
        <span class="n">dp_PV</span><span class="o">=</span><span class="n">dp</span><span class="o">+</span><span class="n">dp_DZ</span>

        <span class="n">dp_DV</span><span class="o">=</span><span class="n">dp_SP</span><span class="o">-</span><span class="n">dp_PV</span>

        <span class="k">if</span> <span class="n">math</span><span class="o">.</span><span class="n">fabs</span><span class="p">(</span><span class="n">dp_DV</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="n">dp_ER</span><span class="p">:</span>

                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">logStr</span><span class="si">}</span><span class="s2"> Convergence: dpFL_DV: </span><span class="si">{</span><span class="n">dp_DV</span><span class="si">:</span><span class="s2">+.4f</span><span class="si">}</span><span class="s2"> dp_ER: </span><span class="si">{</span><span class="n">dp_ER</span><span class="si">:</span><span class="s2">+.4f</span><span class="si">}</span><span class="s2"> k: </span><span class="si">{</span><span class="nb">float</span><span class="p">(</span><span class="n">pipeEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RAU&#39;</span><span class="p">))</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2"> (dk=</span><span class="si">{</span><span class="n">dk</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">logStr</span><span class="si">}</span><span class="s2">                dp_SP: </span><span class="si">{</span><span class="n">dp_SP</span><span class="si">:</span><span class="s2">+.4f</span><span class="si">}</span><span class="s2"> dp_PV: </span><span class="si">{</span><span class="n">dp_PV</span><span class="si">:</span><span class="s2">+.4f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">logStr</span><span class="si">}</span><span class="s2">                pFrom: </span><span class="si">{</span><span class="n">mx</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="n">piCh</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">:</span><span class="s2">7.4f</span><span class="si">}</span><span class="s2">     pTo: </span><span class="si">{</span><span class="n">mx</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="n">pkCh</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">:</span><span class="s2">7.4f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">logStr</span><span class="si">}</span><span class="s2">                 flow: </span><span class="si">{</span><span class="n">mx</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="n">mkCh</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">:</span><span class="s2">7.4f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">logStr</span><span class="si">}</span><span class="s2"> Done.&quot;</span><span class="p">)</span>
                <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">pipeEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RAU&#39;</span><span class="p">))</span>

        <span class="k">elif</span> <span class="n">depth</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span>

                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">logStr</span><span class="si">}</span><span class="s2"> Start:       dpFL_DV: </span><span class="si">{</span><span class="n">dp_DV</span><span class="si">:</span><span class="s2">+.4f</span><span class="si">}</span><span class="s2"> dp_ER: </span><span class="si">{</span><span class="n">dp_ER</span><span class="si">:</span><span class="s2">+.4f</span><span class="si">}</span><span class="s2"> k: </span><span class="si">{</span><span class="nb">float</span><span class="p">(</span><span class="n">pipeEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RAU&#39;</span><span class="p">))</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2"> (dk=</span><span class="si">{</span><span class="n">dk</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">logStr</span><span class="si">}</span><span class="s2">                dp_SP: </span><span class="si">{</span><span class="n">dp_SP</span><span class="si">:</span><span class="s2">+.4f</span><span class="si">}</span><span class="s2"> dp_PV: </span><span class="si">{</span><span class="n">dp_PV</span><span class="si">:</span><span class="s2">+.4f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">logStr</span><span class="si">}</span><span class="s2">                pFrom: </span><span class="si">{</span><span class="n">mx</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="n">piCh</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">:</span><span class="s2">7.4f</span><span class="si">}</span><span class="s2">     pTo: </span><span class="si">{</span><span class="n">mx</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="n">pkCh</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">:</span><span class="s2">7.4f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">logStr</span><span class="si">}</span><span class="s2">                 flow: </span><span class="si">{</span><span class="n">mx</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="n">mkCh</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">:</span><span class="s2">7.4f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">dp_DVVStart</span><span class="o">=</span><span class="n">math</span><span class="o">.</span><span class="n">copysign</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">dp_DV</span><span class="p">)</span>
        <span class="n">dp_DVV</span><span class="o">=</span><span class="n">dp_DVVStart</span>

        <span class="c1"># with the same k-value change dk until the sign of the deviation changes</span>
        <span class="k">while</span> <span class="n">dp_DVV</span><span class="o">==</span><span class="n">dp_DVVStart</span> <span class="ow">and</span> <span class="nb">float</span><span class="p">(</span><span class="n">pipeEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RAU&#39;</span><span class="p">))</span><span class="o">&gt;</span><span class="n">k_min</span><span class="p">:</span>

            <span class="c1"># adjust roughness in the right direction</span>
            <span class="k">if</span> <span class="n">dp_DVV</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="c1"># increase roughness</span>
                <span class="n">dkAdd</span><span class="o">=</span><span class="n">dk</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="c1"># reduce roughness</span>
                <span class="n">dkAdd</span><span class="o">=-</span><span class="n">dk</span>
            <span class="n">k_new</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">pipeEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RAU&#39;</span><span class="p">))</span><span class="o">+</span><span class="n">dkAdd</span>
            <span class="k">if</span> <span class="n">k_new</span> <span class="o">&lt;</span> <span class="n">k_min</span><span class="p">:</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">logStr</span><span class="si">}</span><span class="s2"> k_new: </span><span class="si">{</span><span class="n">k_new</span><span class="si">}</span><span class="s2"> &lt; k_min: </span><span class="si">{</span><span class="n">k_min</span><span class="si">}</span><span class="s2">: k_new==k_min ...&quot;</span><span class="p">)</span>
                <span class="c1"># k + dk = k_min</span>
                <span class="n">dk</span> <span class="o">=</span> <span class="n">math</span><span class="o">.</span><span class="n">fabs</span><span class="p">(</span><span class="n">k_min</span> <span class="o">-</span> <span class="nb">float</span><span class="p">(</span><span class="n">pipeEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RAU&#39;</span><span class="p">)))</span>
                <span class="n">dkAdd</span><span class="o">=-</span><span class="n">dk</span>
                <span class="n">k_new</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">pipeEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RAU&#39;</span><span class="p">))</span><span class="o">+</span><span class="n">dkAdd</span>

            <span class="n">pipeEl</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;RAU&#39;</span><span class="p">,</span><span class="nb">str</span><span class="p">(</span><span class="n">k_new</span><span class="p">))</span>

            <span class="c1"># write</span>
            <span class="n">tree</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">SirCalcXmlFile</span><span class="p">)</span>
            <span class="c1"># calculate</span>
            <span class="k">with</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span><span class="n">pOpenAr</span><span class="p">)</span> <span class="k">as</span> <span class="n">process</span><span class="p">:</span>
                <span class="n">process</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
                <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Command </span><span class="si">{</span><span class="n">process</span><span class="o">.</span><span class="n">args</span><span class="si">}</span><span class="s1"> exited with </span><span class="si">{</span><span class="n">process</span><span class="o">.</span><span class="n">returncode</span><span class="si">}</span><span class="s1">.&#39;</span><span class="p">)</span>
            <span class="c1"># read</span>
            <span class="n">mx</span><span class="o">=</span><span class="n">Mx</span><span class="o">.</span><span class="n">Mx</span><span class="p">(</span><span class="n">m</span><span class="o">.</span><span class="n">mx</span><span class="o">.</span><span class="n">mx1File</span><span class="p">)</span>
            <span class="n">mx</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">{</span><span class="n">col</span><span class="p">:</span><span class="n">col</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">Mx</span><span class="o">.</span><span class="n">reSir3sIDSep</span><span class="o">+</span><span class="n">mo</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="s1">&#39;OBJTYPE_PK&#39;</span><span class="p">),</span><span class="s1">&#39;&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">col</span><span class="p">,</span><span class="n">mo</span> <span class="ow">in</span> <span class="p">[(</span><span class="n">col</span><span class="p">,</span><span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">Mx</span><span class="o">.</span><span class="n">reSir3sIDcompiled</span><span class="p">,</span><span class="n">col</span><span class="p">))</span> <span class="k">for</span> <span class="n">col</span> <span class="ow">in</span> <span class="n">mx</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">to_list</span><span class="p">()</span> <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">Mx</span><span class="o">.</span><span class="n">reSir3sIDcompiled</span><span class="p">,</span><span class="n">col</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">]},</span><span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

            <span class="c1"># calculate deviation</span>
            <span class="n">dp</span><span class="o">=</span><span class="n">mx</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="n">piCh</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">-</span><span class="n">mx</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="n">pkCh</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="c1">#mx.df[dpCh].iloc[0]</span>

            <span class="n">rho</span><span class="o">=</span><span class="mf">.5</span><span class="o">*</span><span class="p">(</span><span class="n">mx</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="n">rhoiCh</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">+</span><span class="n">mx</span><span class="o">.</span><span class="n">df</span><span class="p">[</span><span class="n">rhokCh</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">dp_DZ</span><span class="o">=</span><span class="n">dz</span><span class="o">*</span><span class="n">rho</span><span class="o">*</span><span class="mf">9.81</span><span class="o">*</span><span class="mf">1.e-5</span>
            <span class="n">dp_PV</span><span class="o">=</span><span class="n">dp</span><span class="o">+</span><span class="n">dp_DZ</span>

            <span class="n">dp_DV</span><span class="o">=</span><span class="n">dp_SP</span><span class="o">-</span><span class="n">dp_PV</span>

            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">logStr</span><span class="si">}</span><span class="s2"> Iteration:   dp_DV: </span><span class="si">{</span><span class="n">dp_DV</span><span class="si">:</span><span class="s2">+.4f</span><span class="si">}</span><span class="s2"> dp_ER: </span><span class="si">{</span><span class="n">dp_ER</span><span class="si">:</span><span class="s2">+.4f</span><span class="si">}</span><span class="s2"> k: </span><span class="si">{</span><span class="nb">float</span><span class="p">(</span><span class="n">pipeEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RAU&#39;</span><span class="p">))</span><span class="si">:</span><span class="s2">.4f</span><span class="si">}</span><span class="s2"> (dkAdd=</span><span class="si">{</span><span class="n">dkAdd</span><span class="si">:</span><span class="s2">+.4f</span><span class="si">}</span><span class="s2">)&quot;</span><span class="p">)</span>
            <span class="n">dp_DVV</span><span class="o">=</span><span class="n">math</span><span class="o">.</span><span class="n">copysign</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="n">dp_DV</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">dp_DVV</span><span class="o">!=</span><span class="n">dp_DVVStart</span> <span class="ow">and</span> <span class="nb">float</span><span class="p">(</span><span class="n">pipeEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RAU&#39;</span><span class="p">))</span><span class="o">&gt;</span><span class="n">k_min</span><span class="p">:</span>
            <span class="c1"># the sign of the deviation changed above k _min; continue with k-value change dk/2 ...</span>
            <span class="n">k</span><span class="o">=</span><span class="n">sir3s_calc_roughness</span><span class="p">(</span>
                <span class="n">dk</span><span class="o">=</span><span class="n">dk</span><span class="o">/</span><span class="mi">2</span>
               <span class="p">,</span><span class="n">depth</span><span class="o">=</span><span class="n">depth</span><span class="o">+</span><span class="mi">1</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">dp_DVV</span><span class="o">!=</span><span class="n">dp_DVVStart</span> <span class="ow">and</span> <span class="nb">float</span><span class="p">(</span><span class="n">pipeEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RAU&#39;</span><span class="p">))</span><span class="o">&lt;=</span><span class="n">k_min</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">logStr</span><span class="si">}</span><span class="s2"> the sign of the deviation changed @k_min; continue with k-value change dk/2 ...&quot;</span><span class="p">)</span>
            <span class="n">k</span><span class="o">=</span><span class="n">sir3s_calc_roughness</span><span class="p">(</span>
                <span class="n">dk</span><span class="o">=</span><span class="n">dk</span><span class="o">/</span><span class="mi">2</span>
               <span class="p">,</span><span class="n">depth</span><span class="o">=</span><span class="n">depth</span><span class="o">+</span><span class="mi">1</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">debug</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">logStr</span><span class="si">}</span><span class="s2"> the sign of the deviation changed not; k&lt;=k_min; stay with k_min ...&quot;</span><span class="p">)</span>
            <span class="n">k</span><span class="o">=</span><span class="nb">float</span><span class="p">(</span><span class="n">pipeEl</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;RAU&#39;</span><span class="p">))</span>

        <span class="k">return</span> <span class="n">k</span>

    <span class="k">return</span> <span class="n">sir3s_calc_roughness</span><span class="p">(</span><span class="n">dk</span><span class="o">=</span><span class="n">dkSir3sStart</span><span class="p">)</span>
<br/><br/><br/></pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[80]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sir3sk</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[80]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
0.49875
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[81]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">f</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    &gt;&gt;&gt; k=sir3sk(dbFile=os.path.join(os.path.dirname(os.path.abspath(dxAndMxHelperFcts.__file__)),&#39;Examples\\Example8.db3&#39;))</span>
<span class="sd">    &gt;&gt;&gt; round(k,1)</span>
<span class="sd">    0.5</span>
<span class="sd">    &gt;&gt;&gt; k=sir3sk(dbFile=os.path.join(os.path.dirname(os.path.abspath(dxAndMxHelperFcts.__file__)),&#39;Examples\\Example8.db3&#39;),L=1100,pi=11,mk=-110,dp_SP=.6,DI=185,Ti=91)</span>
<span class="sd">    &gt;&gt;&gt; round(k,2)</span>
<span class="sd">    0.04</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[82]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">doctest</span>
<span class="n">doctest</span><span class="o">.</span><span class="n">testmod</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[82]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
TestResults(failed=0, attempted=4)
</pre></div></div>
</div>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 1986-2025, 3S Consult GmbH.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>